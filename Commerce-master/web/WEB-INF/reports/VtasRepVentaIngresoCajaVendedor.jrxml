<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="612" pageHeight="792" columnWidth="612" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<parameter name="p_idLocal" class="java.lang.Integer"/>
	<parameter name="p_fechaInicialSqlServer" class="java.lang.String"/>
	<parameter name="p_fechaFinalSqlServer" class="java.lang.String"/>
	<parameter name="p_indicadorINI" class="java.lang.Integer"/>
	<parameter name="p_indicadorFIN" class="java.lang.Integer"/>
	<parameter name="p_idTipoOrdenINI" class="java.lang.Integer"/>
	<parameter name="p_idTipoOrdenFIN" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT tblPagos.idLocal,
                      tblPagos.idVendedor,
                      COUNT(*) AS idDcto,
                      SUM(tblPagos.vrPago)
                                         AS vrPago,
                      SUM(tblPagos.vrRteFuente)
                                    AS vrRteFuente,
                      SUM(tblPagos.vrDescuento)
                                    AS vrDescuento,
                      SUM(tblPagos.vrRteIva)
                                       AS vrRteIva,
                      SUM(tblPagos.vrRteIca)
                                       AS vrRteIca,
                 ( SELECT ctrlUsuarios.aliasUsuario
                   FROM ctrlUsuarios
                   WHERE ctrlUsuarios.idUsuario =
                              tblPagos.idVendedor )
                                    AS aliasUsuario
               FROM   tblPagos
               WHERE EXISTS (
               SELECT tblPagosMedios.*
               FROM tblPagosMedios
               WHERE tblPagos.idLocal             =
                       tblPagosMedios.idLocal
               AND tblPagos.idTipoOrden           =
                   tblPagosMedios.idTipoOrden
               AND tblPagos.idRecibo              =
                            tblPagosMedios.idRecibo
               AND tblPagos.idLog                 =
                               tblPagosMedios.idLog
               AND tblPagos.indicador             =
                          tblPagosMedios.indicador
                AND   tblPagos.idLocal = $P{p_idLocal}
                AND ( tblPagos.idTipoOrden = $P{p_idTipoOrdenINI}
                   OR tblPagos.idTipoOrden = $P{p_idTipoOrdenFIN})
                AND tblPagos.indicador BETWEEN $P{p_indicadorINI}
                                           AND $P{p_indicadorFIN}
                AND tblPagos.fechaPago
                 BETWEEN $P{p_fechaInicialSqlServer}
                 AND $P{p_fechaFinalSqlServer})
                 GROUP BY tblPagos.idLocal,
                        tblPagos.idVendedor]]>
	</queryString>
	<field name="idLocal" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="idVendedor" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="idDcto" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vrPago" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vrRteFuente" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vrDescuento" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vrRteIva" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vrRteIca" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="aliasUsuario" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<background>
		<band/>
	</background>
	<title>
		<band/>
	</title>
	<pageHeader>
		<band/>
	</pageHeader>
	<columnHeader>
		<band height="15">
			<staticText>
				<reportElement x="226" y="0" width="30" height="10"/>
				<textElement textAlignment="Left">
					<font size="6"/>
				</textElement>
				<text><![CDATA[USUARIO]]></text>
			</staticText>
			<staticText>
				<reportElement x="330" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<text><![CDATA[VR.PAG]]></text>
			</staticText>
			<staticText>
				<reportElement x="370" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<text><![CDATA[VR.RFT]]></text>
			</staticText>
			<staticText>
				<reportElement x="411" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<text><![CDATA[VR.DSC]]></text>
			</staticText>
			<staticText>
				<reportElement x="452" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<text><![CDATA[VR.RIC]]></text>
			</staticText>
			<staticText>
				<reportElement x="493" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<text><![CDATA[VR.RIV]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="10">
			<elementGroup/>
			<textField pattern="#,##0">
				<reportElement x="330" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{vrPago}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0" isBlankWhenNull="true">
				<reportElement x="226" y="0" width="30" height="10"/>
				<textElement textAlignment="Left">
					<font fontName="Verdana" size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{aliasUsuario}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="370" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{vrRteFuente}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="410" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{vrDescuento}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="452" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font fontName="Verdana" size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{vrRteIca}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0">
				<reportElement x="492" y="0" width="40" height="10"/>
				<textElement textAlignment="Right">
					<font size="6"/>
				</textElement>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{vrRteIva}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="15"/>
	</columnFooter>
	<pageFooter>
		<band/>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
