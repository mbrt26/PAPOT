package co.linxsi.controlador.facturacionelectronica;

import co.linxsi.modelo.facturacionelectronica.FECustomerDTO;
import co.linxsi.modelo.facturacionelectronica.FEDtlDTO;
import co.linxsi.modelo.facturacionelectronica.FEHeadDTO;
import co.linxsi.modelo.facturacionelectronica.FENota;
import co.linxsi.modelo.facturacionelectronica.FacturacionElectronicaDAO;
import co.linxsi.modelo.facturacionelectronica.FacturacionElectronicaDTO;
import co.linxsi.modelo.maestro.local.Local_DTO;
import java.text.DecimalFormat;
import java.util.List;
import java.util.stream.Collectors;

/**
 *
 * @author A
 */
public class XMLDocument {
    final static private DecimalFormat decimalFormat = new DecimalFormat("############");
    public static final int NOTA_CREDITO = 29;
    public static final int FACTURA_VENTA = 9;
    final static private boolean isCreditNoteTypeWithoutReference = false;
     
    static String buildXML(final int orden, final int tipoorden,final int dcto) {

        FacturacionElectronicaDAO fedao = new FacturacionElectronicaDAO();
        String tipoDocumento = "";
        String LegalNumero = "";
        FacturacionElectronicaDTO fedto = new FacturacionElectronicaDTO();
        FEHeadDTO fehdto = fedao.ListaHead(dcto, tipoorden);
        Local_DTO fecdto = fedao.ListaCompany();

        int consecutivo = 0;
        String InvoiceRef = "";
        String codigoCausalNota = "";
        String descripCasalNota = "";
        
        List<FEDtlDTO> listDetalleHeader = null;
             if (tipoorden == FACTURA_VENTA) {
            listDetalleHeader = fedao.ListaDtl(orden);
        }
        if (tipoorden == NOTA_CREDITO) {
            listDetalleHeader = fedao.ListaDtlNota(orden);
        }
        String ordenesCompra = formatOrdenesCompra(listDetalleHeader);
        
        if (tipoorden == FACTURA_VENTA) {
            tipoDocumento = "InvoiceType";
            fedao.setIdTipoOrden(tipoorden);
            consecutivo = fedao.maxDctoDian() + 1;
            LegalNumero = fehdto.getPrefijo() + consecutivo;
            InvoiceRef = "<InvoiceRef/>";
            codigoCausalNota = "<CMReasonCode_c/>";
            descripCasalNota = "<CMReasonDesc_c/>";
        }
        if (tipoorden == NOTA_CREDITO) {
            FENota fen = fedao.ListaNota(orden);
            tipoDocumento = "CreditNoteType";
            LegalNumero = String.valueOf(dcto);

            if (fen.getFacturaDian().equals("")) {
                InvoiceRef = "<InvoiceRef>" + fen.getFacturaInterna() + "</InvoiceRef>";
        
            } else {
                InvoiceRef = "<InvoiceRef>" + fen.getFacturaDian() + "</InvoiceRef>";
            }
            codigoCausalNota = "<CMReasonCode_c>" + fen.getCausal() + "</CMReasonCode_c>";
            descripCasalNota = "<CMReasonDesc_c>" + fen.getNombreCausal() + "</CMReasonDesc_c>";
            fehdto.setObservacion("CAUSAL: " + fen.getNombreCausal());//Se agrega el causal como observacion para transmision

        }
        int codigoFormaPago = fehdto.getDias() == 0 ? 1 : 2;
        String descFormPlazo = fehdto.getDias() == 0 ? "Contado" : "Credito";

        String xml_head = "<ARInvoiceDataSet>\n"
                + "<InvcHead>\n"
                + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                + "		<OpenInvoice/>\n"
                + "		<CreditMemo>false</CreditMemo>\n"
                + "		<UnappliedCash/>\n"
                + "		<CheckRef />\n"
                + "		<InvoiceSuffix />\n"
                + "		<GroupID/>\n"
                + "		<Posted>0</Posted>\n"
                + "		<InvoiceNum>" + dcto + "</InvoiceNum>\n"
                + "		<InvoiceType>" + tipoDocumento + "</InvoiceType>\n"
                + "		<DeferredRevenue/>\n"
                + "		<OrderNum/>\n"
                + "		<CustNum>" + fehdto.getNitCliente() + "</CustNum>\n"
                + "		<Resolution1>" + fecdto.getResolucion() + "</Resolution1>\n"
                + "		<Resolution2>" + fecdto.getResolucion2() + "</Resolution2>\n"
                + "		<PONum>"+ordenesCompra+ "</PONum>\n"
                + "		<EntryPerson/>\n"
                + "		<FOB />\n"
                + "		<TermsCode/>\n"
                + "		<InvoiceDate>" + fehdto.getFecha() + "</InvoiceDate>\n"
                + "		<DueDate>" + fehdto.getFechaVencimiento() + "</DueDate>\n"
                + "		<FiscalYear/>\n"
                + "		<InvoiceCreatorName>" + fehdto.getNombreUsuario() + "</InvoiceCreatorName>\n"
                + "		<InvoiceCreatorCode>" + fehdto.getIdUsuarioSf0() + "</InvoiceCreatorCode>\n"
                + "		<FiscalPeriod/>\n"
                + "		<GLPosted/>\n"
                + "		<InvoiceComment>" + fehdto.getObservacion() + "</InvoiceComment>\n"
                + "		<InvoiceAmt/>\n"
                + "		<DocInvoiceAmt/>\n"
                + "		<InvoiceBal/>\n"
                + "		<DocInvoiceBal/>\n"
                + "		<UnpostedBal/>\n"
                + "		<DocUnpostedBal/>\n"
                + "		<DepositCredit>0</DepositCredit>\n"
                + "		<DocDepositCredit>0</DocDepositCredit>\n"
                + "		<SalesRepList/>\n"
                + "		" + InvoiceRef + "\n"
                + "		" + codigoCausalNota + "\n"
                + "		" + descripCasalNota + "\n"
                + "		<RefCancelled>0</RefCancelled>\n"
                + "		<RefCancelledBy>0</RefCancelledBy>\n"
                + "		<StartUp/>\n"
                + "		<PayDates/>\n"
                + "		<PayAmounts/>\n"
                + "		<DocPayAmounts/>\n"
                + "		<PayDiscAmt/>\n"
                + "		<DocPayDiscAmt/>\n"
                + "		<BillConNum>0</BillConNum>\n"
                + "		<InvoiceHeld>false</InvoiceHeld>\n"
                + "		<CurrencyCode>COP</CurrencyCode>\n"
                + "		<ExchangeRate/>\n"
                + "		<LockRate>false</LockRate>\n"
                + "		<JournalNum>0</JournalNum>\n"
                + "		<JournalCode/>\n"
                + "		<LineType/>\n"
                + "		<RMANum>0</RMANum>\n"
                + "		<Plant/>\n"
                + "		<CardMemberName />\n"
                + "		<CardNumber />\n"
                + "		<CardType />\n"
                + "		<ExpirationMonth>0</ExpirationMonth>\n"
                + "		<ExpirationYear>0</ExpirationYear>\n"
                + "		<CardID />\n"
                + "		<CardmemberReference />\n"
                + "		<LegalNumber>" + LegalNumero + "</LegalNumber>\n"
                + "		<ExternalID />\n"
                + "		<XRefInvoiceNum />\n"
                + "		<DepGainLoss>0</DepGainLoss>\n"
                + "		<DNComments />\n"
                + "		<DNCustNbr />\n"
                + "		<DebitNote>false</DebitNote>\n"
                + "		<SoldToCustNum/>\n"
                + "		<Consolidated>false</Consolidated>\n"
                + "		<BillToInvoiceAddress>false</BillToInvoiceAddress>\n"
                + "		<SoldToInvoiceAddress>true</SoldToInvoiceAddress>\n"
                + "		<ProcessCard />\n"
                + "		<RepComm1>0</RepComm1>\n"
                + "		<RepComm2>0</RepComm2>\n"
                + "		<RepComm3>0</RepComm3>\n"
                + "		<RepComm4>0</RepComm4>\n"
                + "		<RepComm5>0</RepComm5>\n"
                + "		<RepRate1>0</RepRate1>\n"
                + "		<RepRate2>0</RepRate2>\n"
                + "		<RepRate3>0</RepRate3>\n"
                + "		<RepRate4>0</RepRate4>\n"
                + "		<RepRate5>0</RepRate5>\n"
                + "		<RepSales1>0</RepSales1>\n"
                + "		<RepSales2>0</RepSales2>\n"
                + "		<RepSales3>0</RepSales3>\n"
                + "		<RepSales4>0</RepSales4>\n"
                + "		<RepSales5>0</RepSales5>\n"
                + "		<RepSplit1>0</RepSplit1>\n"
                + "		<RepSplit2>0</RepSplit2>\n"
                + "		<RepSplit3>0</RepSplit3>\n"
                + "		<RepSplit4>0</RepSplit4>\n"
                + "		<RepSplit5>0</RepSplit5>\n"
                + "		<CMType />\n"
                + "		<CCStreetAddr />\n"
                + "		<CCZip />\n"
                + "		<ChangedBy/>\n"
                + "		<ChangeDate/>\n"
                + "		<ChangeTime/>\n"
                + "		<ReadyToCalc>true</ReadyToCalc>\n"
                + "		<AutoPrintReady>false</AutoPrintReady>\n"
                + "		<EDIReady>false</EDIReady>\n"
                + "		<RecalcBeforePost>false</RecalcBeforePost>\n"
                + "		<Rounding>0</Rounding>\n"
                + "		<DocRounding>0</DocRounding>\n"
                + "		<Rpt1DepositCredit>0</Rpt1DepositCredit>\n"
                + "		<Rpt2DepositCredit>0</Rpt2DepositCredit>\n"
                + "		<Rpt3DepositCredit>0</Rpt3DepositCredit>\n"
                + "		<Rpt1InvoiceAmt>0</Rpt1InvoiceAmt>\n"
                + "		<Rpt2InvoiceAmt>0</Rpt2InvoiceAmt>\n"
                + "		<Rpt3InvoiceAmt>0</Rpt3InvoiceAmt>\n"
                + "		<Rpt1InvoiceBal>0</Rpt1InvoiceBal>\n"
                + "		<Rpt2InvoiceBal>0</Rpt2InvoiceBal>\n"
                + "		<Rpt3InvoiceBal>0</Rpt3InvoiceBal>\n"
                + "		<Rpt1PayAmounts>0</Rpt1PayAmounts>\n"
                + "		<Rpt2PayAmounts>0</Rpt2PayAmounts>\n"
                + "		<Rpt3PayAmounts>0</Rpt3PayAmounts>\n"
                + "		<Rpt1PayDiscAmt>0</Rpt1PayDiscAmt>\n"
                + "		<Rpt2PayDiscAmt>0</Rpt2PayDiscAmt>\n"
                + "		<Rpt3PayDiscAmt>0</Rpt3PayDiscAmt>\n"
                + "		<Rpt1Rounding>0</Rpt1Rounding>\n"
                + "		<Rpt2Rounding>0</Rpt2Rounding>\n"
                + "		<Rpt3Rounding>0</Rpt3Rounding>\n"
                + "		<Rpt1UnpostedBal>0</Rpt1UnpostedBal>\n"
                + "		<Rpt2UnpostedBal>0</Rpt2UnpostedBal>\n"
                + "		<Rpt3UnpostedBal>0</Rpt3UnpostedBal>\n"
                + "		<RateGrpCode>0</RateGrpCode>\n"
                + "		<DocDepApplied>0</DocDepApplied>\n"
                + "		<Rpt1DepGainLoss>0</Rpt1DepGainLoss>\n"
                + "		<Rpt2DepGainLoss>0</Rpt2DepGainLoss>\n"
                + "		<Rpt3DepGainLoss>0</Rpt3DepGainLoss>\n"
                + "		<ApplyDate/>\n"
                + "		<FiscalYearSuffix />\n"
                + "		<FiscalCalendarID/>\n"
                + "		<TaxPoint/>\n"
                + "		<TaxRateDate/>\n"
                + "		<TaxRegionCode/>\n"
                + "		<TranDocTypeID/>\n"
                + "		<TotFinChrg>0</TotFinChrg>\n"
                + "		<DocumentPrinted>true</DocumentPrinted>\n"
                + "		<PayDiscDays />\n"
                + "		<PayDiscPer />\n"
                + "		<BlockedFinChrg>false</BlockedFinChrg>\n"
                + "		<BlockedFinChrgReason />\n"
                + "		<WithholdAmt>0</WithholdAmt>\n"
                + "		<DocWithholdAmt>0</DocWithholdAmt>\n"
                + "		<Rpt1WithholdAmt>0</Rpt1WithholdAmt>\n"
                + "		<Rpt2WithholdAmt>0</Rpt2WithholdAmt>\n"
                + "		<Rpt3WithholdAmt>0</Rpt3WithholdAmt>\n"
                + "		<BlockedRemLetters>false</BlockedRemLetters>\n"
                + "		<PayDiscPartPay>true</PayDiscPartPay>\n"
                + "		<BlockedRemLettersReason />\n"
                + "		<ShipDate/>\n"
                + "		<CurrRateDate/>\n"
                + "		<PIPayment />\n"
                + "		<PMUID>0</PMUID>\n"
                + "		<UseAltBillTo>false</UseAltBillTo>\n"
                + "		<InPrice>false</InPrice>\n"
                + "		<CorrectionInv>false</CorrectionInv>\n"
                + "		<TaxRateGrpCode />\n"
                + "		<LockTaxRate>false</LockTaxRate>\n"
                + "		<SEBankRef />\n"
                + "		<GUITaxTypeCode />\n"
                + "		<GUIFormatCode />\n"
                + "		<GUIDeductCode />\n"
                + "		<ReversalDocAmount>0</ReversalDocAmount>\n"
                + "		<HeadNum>0</HeadNum>\n"
                + "		<ARLOCID />\n"
                + "		<ContractRef />\n"
                + "		<OurBank />\n"
                + "		<PBProjectID />\n"
                + "		<DepositAmt>0</DepositAmt>\n"
                + "		<GUIExportBillNumber />\n"
                + "		<DocDepositAmt>0</DocDepositAmt>\n"
                + "		<Rpt1DepositAmt>0</Rpt1DepositAmt>\n"
                + "		<GUIExportType />\n"
                + "		<Rpt2DepositAmt>0</Rpt2DepositAmt>\n"
                + "		<GUIExportMark />\n"
                + "		<Rpt3DepositAmt>0</Rpt3DepositAmt>\n"
                + "		<GUIExportBillType />\n"
                + "		<DepUnallocatedAmt>0</DepUnallocatedAmt>\n"
                + "		<DocDepUnallocatedAmt>0</DocDepUnallocatedAmt>\n"
                + "		<Rpt1DepUnallocatedAmt>0</Rpt1DepUnallocatedAmt>\n"
                + "		<BillingNumber />\n"
                + "		<Rpt2DepUnallocatedAmt>0</Rpt2DepUnallocatedAmt>\n"
                + "		<ReadyToBill>false</ReadyToBill>\n"
                + "		<Rpt3DepUnallocatedAmt>0</Rpt3DepUnallocatedAmt>\n"
                + "		<OvrDefTaxDate>false</OvrDefTaxDate>\n"
                + "		<XRefContractNum />\n"
                + "		<MainSite>false</MainSite>\n"
                + "		<SiteCode />\n"
                + "		<BranchID />\n"
                + "		<CustAgentName />\n"
                + "		<CustAgentTaxRegNo />\n"
                + "		<ExportType />\n"
                + "		<ExportReportNo />\n"
                + "		<RealEstateNo />\n"
                + "		<Excluded>false</Excluded>\n"
                + "		<Deferred>false</Deferred>\n"
                + "		<CycleCode />\n"
                + "		<Duration>0</Duration>\n"
                + "		<MaxValueAmt>0</MaxValueAmt>\n"
                + "		<DocMaxValueAmt>0</DocMaxValueAmt>\n"
                + "		<Rpt1MaxValueAmt>0</Rpt1MaxValueAmt>\n"
                + "		<Rpt2MaxValueAmt>0</Rpt2MaxValueAmt>\n"
                + "		<Rpt3MaxValueAmt>0</Rpt3MaxValueAmt>\n"
                + "		<HoldInvoice>false</HoldInvoice>\n"
                + "		<CopyLatestInvoice>false</CopyLatestInvoice>\n"
                + "		<OverrideEndDate>false</OverrideEndDate>\n"
                + "		<CycleInactive>false</CycleInactive>\n"
                + "		<RecurSource>false</RecurSource>\n"
                + "		<InstanceNum>0</InstanceNum>\n"
                + "		<RecurBalance>0</RecurBalance>\n"
                + "		<DocRecurBalance>0</DocRecurBalance>\n"
                + "		<Rpt1RecurBalance>0</Rpt1RecurBalance>\n"
                + "		<Rpt2RecurBalance>0</Rpt2RecurBalance>\n"
                + "		<Rpt3RecurBalance>0</Rpt3RecurBalance>\n"
                + "		<RecurringState />\n"
                + "		<IsRecurring>false</IsRecurring>\n"
                + "		<InvoiceNumList />\n"
                + "		<IsAddedToGTI>false</IsAddedToGTI>\n"
                + "		<CHISRCodeLine />\n"
                + "		<CMReason />\n"
                + "		<THIsImmatAdjustment>false</THIsImmatAdjustment>\n"
                + "		<AGAuthorizationCode />\n"
                + "		<AGUseGoodDefaultMark>false</AGUseGoodDefaultMark>\n"
                + "		<AGDocumentLetter />\n"
                + "		<AGInvoicingPoint />\n"
                + "		<AGLegalNumber />\n"
                + "		<AGPrintingControlType />\n"
                + "		<RevisionNum>0</RevisionNum>\n"
                + "		<TWDeclareYear>0</TWDeclareYear>\n"
                + "		<TWDeclarePeriod>0</TWDeclarePeriod>\n"
                + "		<TWGenerationType />\n"
                + "		<TWGUIGroup />\n"
                + "		<TWPeriodPrefix />\n"
                + "		<InvInCollections>false</InvInCollections>\n"
                + "		<CollectionsCust>false</CollectionsCust>\n"
                + "		<CounterARForm>0</CounterARForm>\n"
                + "		<PostedRecog>false</PostedRecog>\n"
                + "		<MXSATSeal />\n"
                + "		<MXSerie />\n"
                + "		<MXTaxRcptType />\n"
                + "		<MXFiscalFolio />\n"
                + "		<MXTotalPayments>0</MXTotalPayments>\n"
                + "		<MXFolio />\n"
                + "		<MXCertifiedTimestamp />\n"
                + "		<MXSATCertificateSN />\n"
                + "		<MXDigitalSeal />\n"
                + "		<MXPostedTimeStamp />\n"
                + "		<MXCertificate />\n"
                + "		<MXApprovalYear>0</MXApprovalYear>\n"
                + "		<MXCBB />\n"
                + "		<MXApprovalNum>0</MXApprovalNum>\n"
                + "		<MXOriginalStringTFD />\n"
                + "		<MXPaymentNum>0</MXPaymentNum>\n"
                + "		<MXPaidAs />\n"
                + "		<MXCertificateSN />\n"
                + "		<MXOriginalAmount>0</MXOriginalAmount>\n"
                + "		<MXAccountNumber />\n"
                + "		<MXOriginalSeries />\n"
                + "		<MXOriginalFolio />\n"
                + "		<MXTaxRegime />\n"
                + "		<MXOriginalString />\n"
                + "		<MXPaymentName />\n"
                + "		<EInvoice>false</EInvoice>\n"
                + "		<EInvStatus>0</EInvStatus>\n"
                + "		<EInvTimestamp />\n"
                + "		<EInvUpdatedBy />\n"
                + "		<EInvException />\n"
                + "		<WithTaxConfirm>false</WithTaxConfirm>\n"
                + "		<UseAltBillToID>false</UseAltBillToID>\n"
                + "		<Overpaid>false</Overpaid>\n"
                + "		<OrdExchangeRate/>\n"
                + "		<PEAPPayNum>0</PEAPPayNum>\n"
                + "		<PEBankNumber />\n"
                + "		<PECharges>0</PECharges>\n"
                + "		<PECommissions>0</PECommissions>\n"
                + "		<PEDetTaxAmt>0</PEDetTaxAmt>\n"
                + "		<PEDetTaxCurrencyCode />\n"
                + "		<PEDischargeAmt>0</PEDischargeAmt>\n"
                + "		<PEInterest>0</PEInterest>\n"
                + "		<PENoPayPenalty>0</PENoPayPenalty>\n"
                + "		<PESUNATDepAmt>0</PESUNATDepAmt>\n"
                + "		<PESUNATDepNum />\n"
                + "		<PEBOEPosted>false</PEBOEPosted>\n"
                + "		<DocPEInterest>0</DocPEInterest>\n"
                + "		<DocPECommissions>0</DocPECommissions>\n"
                + "		<DocPECharges>0</DocPECharges>\n"
                + "		<DocPENoPayPenalty>0</DocPENoPayPenalty>\n"
                + "		<DocPEDischargeAmt>0</DocPEDischargeAmt>\n"
                + "		<DocPEDetTaxAmt>0</DocPEDetTaxAmt>\n"
                + "		<Rpt1PEInterest>0</Rpt1PEInterest>\n"
                + "		<Rpt1PECommissions>0</Rpt1PECommissions>\n"
                + "		<Rpt1PECharges>0</Rpt1PECharges>\n"
                + "		<Rpt1PENoPayPenalty>0</Rpt1PENoPayPenalty>\n"
                + "		<Rpt1PEDischargeAmt>0</Rpt1PEDischargeAmt>\n"
                + "		<Rpt2PEInterest>0</Rpt2PEInterest>\n"
                + "		<Rpt2PECommissions>0</Rpt2PECommissions>\n"
                + "		<Rpt2PECharges>0</Rpt2PECharges>\n"
                + "		<Rpt2PENoPayPenalty>0</Rpt2PENoPayPenalty>\n"
                + "		<Rpt2PEDischargeAmt>0</Rpt2PEDischargeAmt>\n"
                + "		<Rpt3PEInterest>0</Rpt3PEInterest>\n"
                + "		<Rpt3PECommissions>0</Rpt3PECommissions>\n"
                + "		<Rpt3PECharges>0</Rpt3PECharges>\n"
                + "		<Rpt3PENoPayPenalty>0</Rpt3PENoPayPenalty>\n"
                + "		<Rpt3PEDischargeAmt>0</Rpt3PEDischargeAmt>\n"
                + "		<OurSupplierCode />\n"
                + "		<PEGuaranteeName />\n"
                + "		<PEGuaranteeAddress1 />\n"
                + "		<PEGuaranteeAddress2 />\n"
                + "		<PEGuaranteeAddress3 />\n"
                + "		<PEGuaranteeCity />\n"
                + "		<PEGuaranteeState />\n"
                + "		<PEGuaranteeZip />\n"
                + "		<PEGuaranteeCountry />\n"
                + "		<PEGuaranteeTaxID />\n"
                + "		<PEGuaranteePhoneNum />\n"
                + "		<PEBOEStatus />\n"
                + "		<PEBOEIsMultiGen>false</PEBOEIsMultiGen>\n"
                + "		<PERefDocID />\n"
                + "		<PEReasonCode />\n"
                + "		<PEReasonDesc />\n"
                + "		<TWGUIRegNumSeller />\n"
                + "		<TWGUIRegNumBuyer />\n"
                + "		<TWGUIExportDocumentName />\n"
                + "		<TWGUIExportRemarks />\n"
                + "		<TWGUIExportVerification />\n"
                + "		<PEDebitNoteReasonCode />\n"
                + "		<PEDebitNote>false</PEDebitNote>\n"
                + "		<MXPartPmt>false</MXPartPmt>\n"
                + "		<ABAmt>0.000</ABAmt>\n"
                + "		<AllowChgAfterPrint>true</AllowChgAfterPrint>\n"
                + "		<ARPNHeadNum>-1</ARPNHeadNum>\n"
                + "		<ARPromNoteID />\n"
                + "		<AutoGenPN>false</AutoGenPN>\n"
                + "		<AvailBTCustList/>\n"
                + "		<BankForPI />\n"
                + "		<BankForPIName />\n"
                + "		<BTCustID/>\n"
                + "		<BTCustomerName/>\n"
                + "		<ChangeDateTime/>\n"
                + "		<CNGTIAction />\n"
                + "		<CNGTIAddress />\n"
                + "		<CNGTIBankAccount />\n"
                + "		<CNGTIComment />\n"
                + "		<CNGTICustomerName />\n"
                + "		<CNGTIExportAddress />\n"
                + "		<CNGTIGrossInvcAmt>0.00</CNGTIGrossInvcAmt>\n"
                + "		<CNGTIInvoiceAmt>0.00</CNGTIInvoiceAmt>\n"
                + "		<CNGTINote />\n"
                + "		<CNGTIShipToNum />\n"
                + "		<CNGTIStatus1 />\n"
                + "		<CNGTIStatus2>false</CNGTIStatus2>\n"
                + "		<CNGTITaxCode />\n"
                + "		<COIFRSCalculation>false</COIFRSCalculation>\n"
                + "		<COIFRSFinancialCharge>0.00</COIFRSFinancialCharge>\n"
                + "		<COIFRSInterestRate>0</COIFRSInterestRate>\n"
                + "		<COIFRSNumberOfPeriods>0</COIFRSNumberOfPeriods>\n"
                + "		<COIFRSPresentValue>0.00</COIFRSPresentValue>\n"
                + "		<CollectionsInv>false</CollectionsInv>\n"
                + "		<ContactEmailAddr />\n"
                + "		<ContactFaxNum />\n"
                + "		<ContactName>" + fehdto.getNombreCliente().trim() + "</ContactName>\n"
                + "		<ContactPhoneNum />\n"
                + "		<ConvertedFromDep>false</ConvertedFromDep>\n"
                + "		<CumulativeBalance>0</CumulativeBalance>\n"
                + "		<CurrencySwitch>false</CurrencySwitch>\n"
                + "		<CurrentInstanceNum>0</CurrentInstanceNum>\n"
                + "		<CustAllowOTS>true</CustAllowOTS>\n"
                + "		<CustOnCreditHold>false</CustOnCreditHold>\n"
                + "		<DepBal>0.000</DepBal>\n"
                + "		<DepositCreditEnabled>false</DepositCreditEnabled>\n"
                + "		<DirectDebiting>false</DirectDebiting>\n"
                + "		<DisableAplDate>true</DisableAplDate>\n"
                + "		<DispBalDN>0.000</DispBalDN>\n"
                + "		<DisplayBillAddr/>\n"
                + "		<DisplayCreditCardNum />\n"
                + "		<DisplayCurrencyID/>\n"
                + "		<DisplaySymbol/>\n"
                + "		<DNPmtAmt>0.000</DNPmtAmt>\n"
                + "		<DocABAmt>0.000</DocABAmt>\n"
                + "		<DocCOIFRSFinancialCharge>0.00</DocCOIFRSFinancialCharge>\n"
                + "		<DocCOIFRSPresentValue>0.00</DocCOIFRSPresentValue>\n"
                + "		<DocCumulativeBalance>0</DocCumulativeBalance>\n"
                + "		<DocDepBal>0.000</DocDepBal>\n"
                + "		<DocDispBalDN>0.000</DocDispBalDN>\n"
                + "		<DocDisplaySymbol/>\n"
                + "		<DocDNPmtAmt>0.000</DocDNPmtAmt>\n"
                + "		<DocDspPrepDeposit>0.000</DocDspPrepDeposit>\n"
                + "		<DocDspTaxAmt>0</DocDspTaxAmt>\n"
                + "		<DocPESUNATDepAmt>0.000</DocPESUNATDepAmt>\n"
                + "		<DocRemainTaxAmt>0</DocRemainTaxAmt>\n"
                + "		<DocReverseTaxAmt>0</DocReverseTaxAmt>\n"
                + "		<DocSATaxAmt>0</DocSATaxAmt>\n"
                + "		<DocSourceRecurBalance>0.000</DocSourceRecurBalance>\n"
                + "		<DocSubTotal>0.000</DocSubTotal>\n"
                + "		<DocTaxAmt>" + decimalFormat.format(Math.abs(fehdto.getVriva())) + "</DocTaxAmt>\n"
                + "		<DocVr>0.000</DocVr>\n"
                + "		<DocWHTaxAmt>" + decimalFormat.format(Math.abs(fehdto.getTotalImpuesto())) + "</DocWHTaxAmt>\n"
                + "		<DspABAmt>0</DspABAmt>\n"
                + "		<DspDepBal>0</DspDepBal>\n"
                + "		<DspDepCr>0.000</DspDepCr>\n"
                + "		<DspDocABAmt>0</DspDocABAmt>\n"
                + "		<DspDocDepBal>0</DspDocDepBal>\n"
                + "		<DspDocDepCr>0.000</DspDocDepCr>\n"
                + "		<DspDocInvoiceAmt>" + fehdto.getTotalfacturaSf0() + "</DspDocInvoiceAmt>\n"
                + "		<DspDocInvoiceBal>0</DspDocInvoiceBal>\n"
                + "		<DspDocRounding>0.000</DspDocRounding>\n"
                + "		<DspDocSubTotal>" + decimalFormat.format(Math.abs(fehdto.getVrBase())) + "</DspDocSubTotal>\n"
                + "		<DspInvoiceAmt>0</DspInvoiceAmt>\n"
                + "		<DspInvoiceBal>0</DspInvoiceBal>\n"
                + "		<DspInvoiceRef>0</DspInvoiceRef>\n"
                + "		<DspPayDiscDays />\n"
                + "		<DspPrepDeposit>0</DspPrepDeposit>\n"
                + "		<DspRounding>0</DspRounding>\n"
                + "		<dspSoldToCustID/>\n"
                + "		<DspSubTotal>0</DspSubTotal>\n"
                + "		<DspTaxAmt>0</DspTaxAmt>\n"
                + "		<EnableAssignLegNum>false</EnableAssignLegNum>\n"
                + "		<EnableSOCCDefaults>false</EnableSOCCDefaults>\n"
                + "		<EnableTranDocType>false</EnableTranDocType>\n"
                + "		<EnableVoidLegNum>true</EnableVoidLegNum>\n"
                + "		<ERSInvoice>false</ERSInvoice>\n"
                + "		<ExchangeRateDate/>\n"
                + "		<GenedFromRMA>false</GenedFromRMA>\n"
                + "		<HasBank>false</HasBank>\n"
                + "		<HasLegNumCnfg>true</HasLegNumCnfg>\n"
                + "		<InvoiceTypeDesc>Shipment</InvoiceTypeDesc>\n"
                + "		<IsDK>false</IsDK>\n"
                + "		<IsIntrastatSensitive>false</IsIntrastatSensitive>\n"
                + "		<IsLatestRecurrence>false</IsLatestRecurrence>\n"
                + "		<IsLcked>false</IsLcked>\n"
                + "		<IsPMForGenPIType>false</IsPMForGenPIType>\n"
                + "		<IsRevision>false</IsRevision>\n"
                + "		<LastRevNum>0</LastRevNum>\n"
                + "		<LatestInvoice>0</LatestInvoice>\n"
                + "		<LockStatus>Not Posted</LockStatus>\n"
                + "		<NeedConfirmTaxes>false</NeedConfirmTaxes>\n"
                + "		<PackSlipNum/>\n"
                + "		<PaySchedEnabled>false</PaySchedEnabled>\n"
                + "		<PEBOEChangeStatusTo />\n"
                + "		<PEBOEStatusDesc />\n"
                + "		<PEDspCurrencySymbol />\n"
                + "		<PEInCollections>false</PEInCollections>\n"
                + "		<PIBankAcctID />\n"
                + "		<PICustBankDtl>false</PICustBankDtl>\n"
                + "		<PIInitiation />\n"
                + "		<PrepDepositEnabled>false</PrepDepositEnabled>\n"
                + "		<RecalcAmts />\n"
                + "		<Recurring>false</Recurring>\n"
                + "		<RemainTaxAmt>0</RemainTaxAmt>\n"
                + "		<ReminderSeq>0</ReminderSeq>\n"
                + "		<RetInvoiceNum />\n"
                + "		<ReturnFlag>false</ReturnFlag>\n"
                + "		<ReversalDocAmt>0.000</ReversalDocAmt>\n"
                + "		<ReverseTaxAmt>0</ReverseTaxAmt>\n"
                + "		<RevisionAllowed>false</RevisionAllowed>\n"
                + "		<Rpt1ABAmt>0.000</Rpt1ABAmt>\n"
                + "		<Rpt1COIFRSFinancialCharge>0.00</Rpt1COIFRSFinancialCharge>\n"
                + "		<Rpt1COIFRSPresentValue>0.00</Rpt1COIFRSPresentValue>\n"
                + "		<Rpt1CumulativeBalance>0</Rpt1CumulativeBalance>\n"
                + "		<Rpt1DepBal>0.000</Rpt1DepBal>\n"
                + "		<Rpt1DspABAmt>0</Rpt1DspABAmt>\n"
                + "		<Rpt1DspDepBal>0</Rpt1DspDepBal>\n"
                + "		<Rpt1DspDepCr>0.000</Rpt1DspDepCr>\n"
                + "		<Rpt1DspInvoiceAmt>0</Rpt1DspInvoiceAmt>\n"
                + "		<Rpt1DspInvoiceBal>0.000</Rpt1DspInvoiceBal>\n"
                + "		<Rpt1DspPrepDeposit>0.000</Rpt1DspPrepDeposit>\n"
                + "		<Rpt1DspRounding>0.000</Rpt1DspRounding>\n"
                + "		<Rpt1DspSubTotal>0.000</Rpt1DspSubTotal>\n"
                + "		<Rpt1DspTaxAmt>0</Rpt1DspTaxAmt>\n"
                + "		<Rpt1RemainTaxAmt>0</Rpt1RemainTaxAmt>\n"
                + "		<Rpt1ReverseTaxAmt>0</Rpt1ReverseTaxAmt>\n"
                + "		<Rpt1SATaxAmt>0</Rpt1SATaxAmt>\n"
                + "		<Rpt1SourceRecurBalance>0.000</Rpt1SourceRecurBalance>\n"
                + "		<Rpt1SubTotal>0.000</Rpt1SubTotal>\n"
                + "		<Rpt1TaxAmt>0.000</Rpt1TaxAmt>\n"
                + "		<Rpt1Vr>0.000</Rpt1Vr>\n"
                + "		<Rpt1WHTaxAmt>0</Rpt1WHTaxAmt>\n"
                + "		<Rpt2ABAmt>0.000</Rpt2ABAmt>\n"
                + "		<Rpt2COIFRSFinancialCharge>0.00</Rpt2COIFRSFinancialCharge>\n"
                + "		<Rpt2COIFRSPresentValue>0.00</Rpt2COIFRSPresentValue>\n"
                + "		<Rpt2CumulativeBalance>0</Rpt2CumulativeBalance>\n"
                + "		<Rpt2DepBal>0.000</Rpt2DepBal>\n"
                + "		<Rpt2DspABAmt>0</Rpt2DspABAmt>\n"
                + "		<Rpt2DspDepBal>0</Rpt2DspDepBal>\n"
                + "		<Rpt2DspDepCr>0.000</Rpt2DspDepCr>\n"
                + "		<Rpt2DspInvoiceAmt>0</Rpt2DspInvoiceAmt>\n"
                + "		<Rpt2DspInvoiceBal>0.000</Rpt2DspInvoiceBal>\n"
                + "		<Rpt2DspPrepDeposit>0.000</Rpt2DspPrepDeposit>\n"
                + "		<Rpt2DspRounding>0.000</Rpt2DspRounding>\n"
                + "		<Rpt2DspSubTotal>0.000</Rpt2DspSubTotal>\n"
                + "		<Rpt2DspTaxAmt>0</Rpt2DspTaxAmt>\n"
                + "		<Rpt2RemainTaxAmt>0</Rpt2RemainTaxAmt>\n"
                + "		<Rpt2ReverseTaxAmt>0</Rpt2ReverseTaxAmt>\n"
                + "		<Rpt2SATaxAmt>0</Rpt2SATaxAmt>\n"
                + "		<Rpt2SourceRecurBalance>0.000</Rpt2SourceRecurBalance>\n"
                + "		<Rpt2SubTotal>0.000</Rpt2SubTotal>\n"
                + "		<Rpt2Taxamt>0.000</Rpt2Taxamt>\n"
                + "		<Rpt2Vr>0.000</Rpt2Vr>\n"
                + "		<Rpt2WHTaxAmt>0</Rpt2WHTaxAmt>\n"
                + "		<Rpt3ABAmt>0.000</Rpt3ABAmt>\n"
                + "		<Rpt3COIFRSFinancialCharge>0.00</Rpt3COIFRSFinancialCharge>\n"
                + "		<Rpt3COIFRSPresentValue>0.00</Rpt3COIFRSPresentValue>\n"
                + "		<Rpt3CumulativeBalance>0</Rpt3CumulativeBalance>\n"
                + "		<Rpt3DepBal>0.000</Rpt3DepBal>\n"
                + "		<Rpt3DspABAmt>0</Rpt3DspABAmt>\n"
                + "		<Rpt3DspDepBal>0</Rpt3DspDepBal>\n"
                + "		<Rpt3DspDepCr>0.000</Rpt3DspDepCr>\n"
                + "		<Rpt3DspInvoiceAmt>0</Rpt3DspInvoiceAmt>\n"
                + "		<Rpt3DspInvoiceBal>0.000</Rpt3DspInvoiceBal>\n"
                + "		<Rpt3DspPrepDeposit>0.000</Rpt3DspPrepDeposit>\n"
                + "		<Rpt3DspRounding>0.000</Rpt3DspRounding>\n"
                + "		<Rpt3DspSubTotal>0.000</Rpt3DspSubTotal>\n"
                + "		<Rpt3DspTaxAmt>0</Rpt3DspTaxAmt>\n"
                + "		<Rpt3RemainTaxAmt>0</Rpt3RemainTaxAmt>\n"
                + "		<Rpt3ReverseTaxAmt>0</Rpt3ReverseTaxAmt>\n"
                + "		<Rpt3SATaxAmt>0</Rpt3SATaxAmt>\n"
                + "		<Rpt3SourceRecurBalance>0.000</Rpt3SourceRecurBalance>\n"
                + "		<Rpt3SubTotal>0.000</Rpt3SubTotal>\n"
                + "		<Rpt3TaxAmt>0.000</Rpt3TaxAmt>\n"
                + "		<Rpt3Vr>0.000</Rpt3Vr>\n"
                + "		<Rpt3WHTaxAmt>0</Rpt3WHTaxAmt>\n"
                + "		<RvnJrnUID>0</RvnJrnUID>\n"
                + "		<SalesRepCode1>" + fehdto.getIdUsuarioSf0() + "</SalesRepCode1>\n"
                + "		<SalesRepCode2 />\n"
                + "		<SalesRepCode3 />\n"
                + "		<SalesRepCode4 />\n"
                + "		<SalesRepCode5 />\n"
                + "		<SalesRepName1>" + fehdto.getNombreUsuario() + "</SalesRepName1>\n"
                + "		<SalesRepName2 />\n"
                + "		<SalesRepName3 />\n"
                + "		<SalesRepName4 />\n"
                + "		<SalesRepName5 />\n"
                + "		<SATaxAmt>0</SATaxAmt>\n"
                + "		<SkipRecurring>true</SkipRecurring>\n"
                + "		<SoldToAddressList/>\n"
                + "		<SoldToCustID/>\n"
                + "		<SoldToCustomerName/>\n"
                + "		<SourceInvoiceNum>0</SourceInvoiceNum>\n"
                + "		<SourceRecurBalance>0.000</SourceRecurBalance>\n"
                + "		<SubTotal>0.000</SubTotal>\n"
                + "		<SystemTranType>ARInvoice</SystemTranType>\n"
                + "		<TaxAmt>0</TaxAmt>\n"
                + "		<TaxExchangeRate>0.0000</TaxExchangeRate>\n"
                + "		<TotalInstanceNum>0</TotalInstanceNum>\n"
                + "		<TransApplyDate/>\n"
                + "		<UseSOCCDefaults>false</UseSOCCDefaults>\n"
                + "		<UseTaxRate>false</UseTaxRate>\n"
                + "		<VNInvDescription />\n"
                + "		<VNInvoiceType />\n"
                + "		<Vr>0.000</Vr>\n"
                + "		<WHTaxAmt>0</WHTaxAmt>\n"
                + "		<XRateLabel/>\n"
                + "		<COIFRSEnabled>false</COIFRSEnabled>\n"
                + "		<MXExportCertOrigin>false</MXExportCertOrigin>\n"
                + "		<MXExportCertOriginNum />\n"
                + "		<MXExportConfNum />\n"
                + "		<MXExportCustDocCode />\n"
                + "		<MXExportOperationType />\n"
                + "		<MXIncoterm />\n"
                + "		<CNTaxInvoiceType>0</CNTaxInvoiceType>\n"
                + "		<BitFlag>0</BitFlag>\n"
                + "		<AGInvoicingPointDescription />\n"
                + "		<CardTypeDescription />\n"
                + "		<CurrencyCodeCurrencyID>COP</CurrencyCodeCurrencyID>\n"
                + "		<CurrencyCodeCurrSymbol/>\n"
                + "		<CurrencyCodeCurrDesc/>\n"
                + "		<CurrRateGrpDescription/>\n"
                + "		<CustomerCustID/>\n"
                + "		<CustomerBTName />\n"
                + "		<CustomerName>" + fehdto.getNombreCliente().trim() + "</CustomerName>\n"
                + "		<FOBDescription />\n"
                + "		<JournalCodeJrnlDescription/>\n"
                + "		<OrderNumCurrencyCode/>\n"
                + "		<OrderNumCardMemberName />\n"
                + "		<OurBankPayerRef />\n"
                + "		<OurBankBankIdentifier />\n"
                + "		<OurBankTypeCode />\n"
                + "		<OurBankBankAcctID />\n"
                + "		<OurBankCheckingAccount />\n"
                + "		<OurBankBankName />\n"
                + "		<OurBankIBANCode />\n"
                + "		<OurBankLocalBIC />\n"
                + "		<OurBankDescription />\n"
                + "		<PayMethodName />\n"
                + "		<PayMethodSummarizePerCustomer>false</PayMethodSummarizePerCustomer>\n"
                + "		<PayMethodType>0</PayMethodType>\n"
                + "		<PlantName/>\n"
                + "		<ProjectDescription />\n"
                + "		<RecurringCycleMaximumValue>false</RecurringCycleMaximumValue>\n"
                + "		<TaxRateGrpDescription />\n"
                + "		<TaxRegionDescription/>\n"
                + "		<TermsCodeDescription/>\n"
                + "		<TranDocTypeDescription/>\n"
                + "		<RowMod />\n"
                + "		<Character01 />\n"
                + "		<Number01>" + decimalFormat.format(Math.abs(fehdto.getVrRetefunte())) + "</Number01>\n"
                + "		<Number02>" + decimalFormat.format(Math.abs(fehdto.getVrRteIva())) + "</Number02>\n"
                + "		<Number03>0</Number03>\n"
                + "		<Number04>0</Number04>\n"
                + "		<Number05>0</Number05>\n"
                + "		<Number06>0</Number06>\n"
                + "		<Number07>0</Number07>\n"
                + "		<Number08>0</Number08>\n"
                + "		<Number09>0</Number09>\n"
                + "		<Number10>0</Number10>\n"
                + "		<CheckBox01>false</CheckBox01>\n"
                + "		<CheckBox02>false</CheckBox02>\n"
                + "		<CheckBox03>false</CheckBox03>\n"
                + "		<CheckBox04>false</CheckBox04>\n"
                + "		<CheckBox05>false</CheckBox05>\n"
                + "		<Number11>0</Number11>\n"
                + "		<Number12>0</Number12>\n"
                + "		<Number13>0</Number13>\n"
                + "		<Number14>0</Number14>\n"
                + "		<Number15>0</Number15>\n"
                + "		<Number16>0</Number16>\n"
                + "		<Number17>0</Number17>\n"
                + "		<Number18>0</Number18>\n"
                + "		<CheckBox09>false</CheckBox09>\n"
                + "		<CheckBox10>false</CheckBox10>\n"
                + "		<CheckBox11>false</CheckBox11>\n"
                + "		<CheckBox12>false</CheckBox12>\n"
                + "		<CheckBox15>false</CheckBox15>\n"
                + "		<CheckBox20>false</CheckBox20>\n"
                + "		<ShortChar01 />\n"
                + "		<ShortChar02 />\n"
                + "		<ShortChar03>0001</ShortChar03>\n"
                + "		<ShortChar04/>\n"
                + "		<ShortChar07 />\n"
                + "		<ShortChar09 />\n"
                + "		<ShortChar10 />\n"
                + "		<Deterioro_c>0.00</Deterioro_c>\n"
                + "		<Reversion_c>0.00</Reversion_c>\n"
                + "		<DescTimbrado_c />\n"
                + "		<EstadoTimbre_c>false</EstadoTimbre_c>\n"
                + "		<AceptaCliente_c>false</AceptaCliente_c>\n"
                + "		<ObservacionCliente_c />\n"
                + "		<PaymentMeansID_c>" + codigoFormaPago + "</PaymentMeansID_c>\n"
                + "		<PaymentMeansDescription>" + descFormPlazo + "</PaymentMeansDescription>\n"
                + "		<PaymentMeansCode_c>1</PaymentMeansCode_c>\n"
                + "		<PaymentDurationMeasure>" + fehdto.getDias() + " DIAS</PaymentDurationMeasure>\n"
                + "		<PaymentDueDate>" + fehdto.getFechaVencimiento() + "</PaymentDueDate>\n"
                + "	</InvcHead>\n";

        fedao.setXml(xml_head);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(1);
        fedao.setStatus(false);
        fedao.setUrl("");
        fedao.ingresaXml();

        List<FEDtlDTO> ListaDetalle = null;
        List<FEDtlDTO> ListaTax = null;
        if (tipoorden == FACTURA_VENTA) {
            ListaDetalle = fedao.ListaDtl(orden);
        }
        if (tipoorden == NOTA_CREDITO) {
            ListaDetalle = fedao.ListaDtlNota(orden);
        }

        ListaTax = ListaDetalle;

        int i = 1;
        String xml_dtl = "";
        for (FEDtlDTO feddto : ListaDetalle) {

            if (tipoorden == NOTA_CREDITO) {
                String numeroFactura = feddto.getOt();
                String numeroPedido = fedao.getPedido(numeroFactura, feddto.getItem());
                String nombreTercero = fedao.dameNombreTercero(String.valueOf(feddto.getIdplu()), numeroPedido);
                feddto.setNombreRefCliente(nombreTercero);
                FEDtlDTO dtllDTO = fedao.dameDtllNota(numeroPedido);
                feddto.setOt(dtllDTO.getOt());
                feddto.setOrcenCompra(dtllDTO.getOrcenCompra());
                feddto.setIdFicha(dtllDTO.getIdFicha());
            }

            xml_dtl = xml_dtl + "<InvcDtl>\n"
                    + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                    + "		<InvoiceNum>" + dcto + "</InvoiceNum>\n"
                    + "		<InvoiceLine>0" + i + "</InvoiceLine>\n"
                    + "		<LineType/>\n"
                    + "		<ContractNum>0</ContractNum>\n"
                    + "		<XPartNum>" + feddto.getIdFicha() + "</XPartNum>\n"
                    + "		<XRevisionNum/>\n"
                    + "		<PartNum>" + feddto.getIdFicha() + "</PartNum>\n"
                    + "		<LineDesc>" + feddto.getNombreRefCliente() + "</LineDesc>\n"
                    + "		<IUM/>\n"
                    + "		<RevisionNum />\n"
                    + "		<POLine >" + feddto.getOrcenCompra() + "</POLine >\n"
                    + "		<TaxExempt />\n"
                    + "		<TaxCatID/>\n"
                    + "		<Commissionable>false</Commissionable>\n"
                    + "		<DiscountPercent>0</DiscountPercent>\n"
                    + "		<UnitPrice>" + feddto.getVrVentaSf3()  + "</UnitPrice>\n"
                    + "		<DocUnitPrice>" + feddto.getVrVentaSf3()  + "</DocUnitPrice>\n"
                    + "		<PricePerCode>E</PricePerCode>\n"
                    + "		<OurOrderQty>0</OurOrderQty>\n"
                    + "		<ExtPrice>0</ExtPrice>\n"
                    + "		<DocExtPrice>" + decimalFormat.format(Math.abs(feddto.getSubtotal())) + "</DocExtPrice>\n"
                    + "		<Discount>0</Discount>\n"
                    + "		<DocDiscount>0</DocDiscount>\n"
                    + "		<TotalMiscChrg>0</TotalMiscChrg>\n"
                    + "		<DocTotalMiscChrg>0</DocTotalMiscChrg>\n"
                    + "		<ProdCode/>\n"
                    + "		<OurShipQty>0</OurShipQty>\n"
                    + "		<PackNum/>\n"
                    + "		<PackLine/>\n"
                    + "		<OrderNum>0</OrderNum>\n"
                    + "		<OrderLine/>\n"
                    + "		<OrderRelNum/>\n"
                    + "		<ShipToCustNum/>\n"
                    + "		<ShipToNum />\n"
                    + "		<ShipDate/>\n"
                    + "		<ShipViaCode/>\n"
                    + "		<AdvanceBillCredit>0</AdvanceBillCredit>\n"
                    + "		<DocAdvanceBillCredit>0</DocAdvanceBillCredit>\n"
                    + "		<CustNum/>\n"
                    + "		<InvoiceComment />\n"
                    + "		<ShpConNum>0</ShpConNum>\n"
                    + "		<MtlUnitCost>0</MtlUnitCost>\n"
                    + "		<LbrUnitCost>0.0000</LbrUnitCost>\n"
                    + "		<BurUnitCost>0.0000</BurUnitCost>\n"
                    + "		<SubUnitCost>0.0000</SubUnitCost>\n"
                    + "		<MtlBurUnitCost>0</MtlBurUnitCost>\n"
                    + "		<COSPostingReqd>true</COSPostingReqd>\n"
                    + "		<COSPosted>false</COSPosted>\n"
                    + "		<ContractCode />\n"
                    + "		<CallNum>0</CallNum>\n"
                    + "		<CallCode />\n"
                    + "		<RMANum>0</RMANum>\n"
                    + "		<RMALine>0</RMALine>\n"
                    + "		<SalesCatID />\n"
                    + "		<FiscalYear>0</FiscalYear>\n"
                    + "		<FiscalPeriod>0</FiscalPeriod>\n"
                    + "		<JournalCode />\n"
                    + "		<JournalNum>0</JournalNum>\n"
                    + "		<SellingOrderQty>0</SellingOrderQty>\n"
                    + "		<SellingShipQty>" + Math.abs(feddto.getCantidad()) + "</SellingShipQty>\n"
                    + "		<SalesUM>" + feddto.getUnidadMedida() + "</SalesUM>\n"
                    + "		<SellingFactor>0</SellingFactor>\n"
                    + "		<ProjectID />\n"
                    + "		<MilestoneID />\n"
                    + "		<ListPrice>0</ListPrice>\n"
                    + "		<DocListPrice>0</DocListPrice>\n"
                    + "		<OrdBasedPrice>0</OrdBasedPrice>\n"
                    + "		<DocOrdBasedPrice>0</DocOrdBasedPrice>\n"
                    + "		<AdvGainLoss>0</AdvGainLoss>\n"
                    + "		<SellingFactorDirection>D</SellingFactorDirection>\n"
                    + "		<RepRate1>0.00</RepRate1>\n"
                    + "		<RepRate2>0.00</RepRate2>\n"
                    + "		<RepRate3>0.00</RepRate3>\n"
                    + "		<RepRate4>0.00</RepRate4>\n"
                    + "		<RepRate5>0.00</RepRate5>\n"
                    + "		<RepSplit1>0</RepSplit1>\n"
                    + "		<RepSplit2>0</RepSplit2>\n"
                    + "		<RepSplit3>0</RepSplit3>\n"
                    + "		<RepSplit4>0</RepSplit4>\n"
                    + "		<RepSplit5>0</RepSplit5>\n"
                    + "		<BTCustNum>0</BTCustNum>\n"
                    + "		<JCMtlUnitCost>0.0000</JCMtlUnitCost>\n"
                    + "		<JCLbrUnitCost>0.0000</JCLbrUnitCost>\n"
                    + "		<JCBurUnitCost>0.0000</JCBurUnitCost>\n"
                    + "		<JCSubUnitCost>0.0000</JCSubUnitCost>\n"
                    + "		<JCMtlBurUnitCost>0.0000</JCMtlBurUnitCost>\n"
                    + "		<ChangedBy/>\n"
                    + "		<ChangeDate/>\n"
                    + "		<ChangeTime/>\n"
                    + "		<RevChargeMethod />\n"
                    + "		<OverrideReverseCharge>false</OverrideReverseCharge>\n"
                    + "		<RevChargeApplied>false</RevChargeApplied>\n"
                    + "		<TaxConnectCalc>false</TaxConnectCalc>\n"
                    + "		<GetDfltTaxIds>true</GetDfltTaxIds>\n"
                    + "		<Rpt1AdvanceBillCredit>0.000</Rpt1AdvanceBillCredit>\n"
                    + "		<Rpt2AdvanceBillCredit>0.000</Rpt2AdvanceBillCredit>\n"
                    + "		<Rpt3AdvanceBillCredit>0.000</Rpt3AdvanceBillCredit>\n"
                    + "		<Rpt1Discount>0.000</Rpt1Discount>\n"
                    + "		<Rpt2Discount>0.000</Rpt2Discount>\n"
                    + "		<Rpt3Discount>0.000</Rpt3Discount>\n"
                    + "		<Rpt1ExtPrice>0.000</Rpt1ExtPrice>\n"
                    + "		<Rpt2ExtPrice>0.000</Rpt2ExtPrice>\n"
                    + "		<Rpt3ExtPrice>0.000</Rpt3ExtPrice>\n"
                    + "		<Rpt1ListPrice>0.0000</Rpt1ListPrice>\n"
                    + "		<Rpt2ListPrice>0.0000</Rpt2ListPrice>\n"
                    + "		<Rpt3ListPrice>0.0000</Rpt3ListPrice>\n"
                    + "		<Rpt1OrdBasedPrice>0.0000</Rpt1OrdBasedPrice>\n"
                    + "		<Rpt2OrdBasedPrice>0.0000</Rpt2OrdBasedPrice>\n"
                    + "		<Rpt3OrdBasedPrice>0.0000</Rpt3OrdBasedPrice>\n"
                    + "		<Rpt1TotalMiscChrg>0.000</Rpt1TotalMiscChrg>\n"
                    + "		<Rpt2TotalMiscChrg>0.000</Rpt2TotalMiscChrg>\n"
                    + "		<Rpt3TotalMiscChrg>0.000</Rpt3TotalMiscChrg>\n"
                    + "		<Rpt1UnitPrice>0.0000</Rpt1UnitPrice>\n"
                    + "		<Rpt2UnitPrice>0.0000</Rpt2UnitPrice>\n"
                    + "		<Rpt3UnitPrice>0.0000</Rpt3UnitPrice>\n"
                    + "		<Rpt1AdvGainLoss>0.000</Rpt1AdvGainLoss>\n"
                    + "		<Rpt2AdvGainLoss>0.000</Rpt2AdvGainLoss>\n"
                    + "		<Rpt3AdvGainLoss>0.000</Rpt3AdvGainLoss>\n"
                    + "		<FiscalYearSuffix />\n"
                    + "		<FiscalCalendarID />\n"
                    + "		<TaxRegionCode/>\n"
                    + "		<UseOTS>false</UseOTS>\n"
                    + "		<OTSName />\n"
                    + "		<OTSAddress1 />\n"
                    + "		<OTSAddress2 />\n"
                    + "		<OTSAddress3 />\n"
                    + "		<OTSCity />\n"
                    + "		<OTSState />\n"
                    + "		<OTSZIP />\n"
                    + "		<OTSResaleID />\n"
                    + "		<OTSTaxRegionCode />\n"
                    + "		<OTSContact />\n"
                    + "		<OTSFaxNum />\n"
                    + "		<OTSPhoneNum />\n"
                    + "		<OTSCountryNum>0</OTSCountryNum>\n"
                    + "		<Plant/>\n"
                    + "		<WarehouseCode/>\n"
                    + "		<CallLine>0</CallLine>\n"
                    + "		<DropShipPackLine>0</DropShipPackLine>\n"
                    + "		<DropShipPackSlip />\n"
                    + "		<FinChargeCode />\n"
                    + "		<ABTUID />\n"
                    + "		<InUnitPrice>0.0000</InUnitPrice>\n"
                    + "		<DocInUnitPrice>0.0000</DocInUnitPrice>\n"
                    + "		<InExtPrice>0.000</InExtPrice>\n"
                    + "		<DocInExtPrice>0.000</DocInExtPrice>\n"
                    + "		<InDiscount>0.000</InDiscount>\n"
                    + "		<DocInDiscount>0.000</DocInDiscount>\n"
                    + "		<InTotalMiscChrg>0.000</InTotalMiscChrg>\n"
                    + "		<DocInTotalMiscChrg>0.000</DocInTotalMiscChrg>\n"
                    + "		<InListPrice>0.0000</InListPrice>\n"
                    + "		<DocInListPrice>0.0000</DocInListPrice>\n"
                    + "		<InOrdBasedPrice>0.0000</InOrdBasedPrice>\n"
                    + "		<DocInOrdBasedPrice>0.0000</DocInOrdBasedPrice>\n"
                    + "		<Rpt1InDiscount>0.000</Rpt1InDiscount>\n"
                    + "		<Rpt2InDiscount>0.000</Rpt2InDiscount>\n"
                    + "		<Rpt3InDiscount>0.000</Rpt3InDiscount>\n"
                    + "		<Rpt1InExtPrice>0.000</Rpt1InExtPrice>\n"
                    + "		<Rpt2InExtPrice>0.000</Rpt2InExtPrice>\n"
                    + "		<Rpt3InExtPrice>0.000</Rpt3InExtPrice>\n"
                    + "		<Rpt1InListPrice>0.0000</Rpt1InListPrice>\n"
                    + "		<Rpt2InListPrice>0.0000</Rpt2InListPrice>\n"
                    + "		<Rpt3InListPrice>0.0000</Rpt3InListPrice>\n"
                    + "		<Rpt1InOrdBasedPrice>0.0000</Rpt1InOrdBasedPrice>\n"
                    + "		<Rpt2InOrdBasedPrice>0.0000</Rpt2InOrdBasedPrice>\n"
                    + "		<Rpt3InOrdBasedPrice>0.0000</Rpt3InOrdBasedPrice>\n"
                    + "		<Rpt1InTotalMiscChrg>0.000</Rpt1InTotalMiscChrg>\n"
                    + "		<Rpt2InTotalMiscChrg>0.000</Rpt2InTotalMiscChrg>\n"
                    + "		<Rpt3InTotalMiscChrg>0.000</Rpt3InTotalMiscChrg>\n"
                    + "		<Rpt1InUnitPrice>0.0000</Rpt1InUnitPrice>\n"
                    + "		<Rpt2InUnitPrice>0.0000</Rpt2InUnitPrice>\n"
                    + "		<Rpt3InUnitPrice>0.0000</Rpt3InUnitPrice>\n"
                    + "		<CorrectionDtl>false</CorrectionDtl>\n"
                    + "		<AssetNum />\n"
                    + "		<DisposalNum>0</DisposalNum>\n"
                    + "		<IncomeTaxCode />\n"
                    + "		<PBLineType />\n"
                    + "		<InvoiceLineRef>0</InvoiceLineRef>\n"
                    + "		<InvoiceRef>0</InvoiceRef>\n"
                    + "		<LotNum />\n"
                    + "		<PBInvoiceLine>0</PBInvoiceLine>\n"
                    + "		<RAID>0</RAID>\n"
                    + "		<RADtlID>0</RADtlID>\n"
                    + "		<DeferredRev>false</DeferredRev>\n"
                    + "		<RACode />\n"
                    + "		<ChargeDefRev>false</ChargeDefRev>\n"
                    + "		<RenewalNbr>0</RenewalNbr>\n"
                    + "		<DefRevPosted>false</DefRevPosted>\n"
                    + "		<LinkedInvcUnitPrice>0.0000</LinkedInvcUnitPrice>\n"
                    + "		<DspWithholdAmt>0.000</DspWithholdAmt>\n"
                    + "		<DocDspWithholdAmt>0.000</DocDspWithholdAmt>\n"
                    + "		<Rpt1DspWithholdAmt>0.000</Rpt1DspWithholdAmt>\n"
                    + "		<Rpt2DspWithholdAmt>0.000</Rpt2DspWithholdAmt>\n"
                    + "		<Rpt3DspWithholdAmt>0.000</Rpt3DspWithholdAmt>\n"
                    + "		<LinkedCurrencyCode />\n"
                    + "		<PhaseID />\n"
                    + "		<PEBOEHeadNum>0</PEBOEHeadNum>\n"
                    + "		<MXSellingShipQty>0.00000</MXSellingShipQty>\n"
                    + "		<MXUnitPrice>0.0000</MXUnitPrice>\n"
                    + "		<DocMXUnitPrice>0.0000</DocMXUnitPrice>\n"
                    + "		<Rpt1MXUnitPrice>0.0000</Rpt1MXUnitPrice>\n"
                    + "		<Rpt2MXUnitPrice>0.0000</Rpt2MXUnitPrice>\n"
                    + "		<Rpt3MXUnitPrice>0.0000</Rpt3MXUnitPrice>\n"
                    + "		<CustCostCenter />\n"
                    + "		<DEIsServices>false</DEIsServices>\n"
                    + "		<DEIsSecurityFinancialDerivative>false</DEIsSecurityFinancialDerivative>\n"
                    + "		<DEInternationalSecuritiesID />\n"
                    + "		<DEIsInvestment>false</DEIsInvestment>\n"
                    + "		<DEPayStatCode />\n"
                    + "		<EntityUseCode />\n"
                    + "		<Reclassified>false</Reclassified>\n"
                    + "		<PartiallyDefer>false</PartiallyDefer>\n"
                    + "		<DeferredPercent>0.00</DeferredPercent>\n"
                    + "		<Reclass>false</Reclass>\n"
                    + "		<DeferredOnly>false</DeferredOnly>\n"
                    + "		<ReclassCodeID />\n"
                    + "		<ReclassReasonCode />\n"
                    + "		<ReclassComments />\n"
                    + "		<DeferredRevAmt>0.000</DeferredRevAmt>\n"
                    + "		<DocDeferredRevAmt>0.000</DocDeferredRevAmt>\n"
                    + "		<Rpt1DeferredRevAmt>0.000</Rpt1DeferredRevAmt>\n"
                    + "		<Rpt2DeferredRevAmt>0.000</Rpt2DeferredRevAmt>\n"
                    + "		<Rpt3DeferredRevAmt>0.000</Rpt3DeferredRevAmt>\n"
                    + "		<ChargeReclass>false</ChargeReclass>\n"
                    + "		<DEDenomination />\n"
                    + "		<DropShipPONum>0</DropShipPONum>\n"
                    + "		<DocInAdvanceBillCredit>0.000</DocInAdvanceBillCredit>\n"
                    + "		<InAdvanceBillCredit>0.000</InAdvanceBillCredit>\n"
                    + "		<Rpt1InAdvanceBillCredit>0.000</Rpt1InAdvanceBillCredit>\n"
                    + "		<Rpt2InAdvanceBillCredit>0.000</Rpt2InAdvanceBillCredit>\n"
                    + "		<Rpt3InAdvanceBillCredit>0.000</Rpt3InAdvanceBillCredit>\n"
                    + "		<MYIndustryCode />\n"
                    + "		<DockingStation />\n"
                    + "		<ConsolidateLines>false</ConsolidateLines>\n"
                    + "		<AllowReclassify>true</AllowReclassify>\n"
                    + "		<AllowTaxCodeUpd>true</AllowTaxCodeUpd>\n"
                    + "		<AllowUpdPartDefer>false</AllowUpdPartDefer>\n"
                    + "		<BillToCustID/>\n"
                    + "		<BTCustName/>\n"
                    + "		<ChangeDateTime/>\n"
                    + "		<CheckAmortAmounts>false</CheckAmortAmounts>\n"
                    + "		<CNGTIDescription1 />\n"
                    + "		<CNGTIDescription2 />\n"
                    + "		<CNGTIDescription3 />\n"
                    + "		<CNGTIDiscountTaxAmount>0.00</CNGTIDiscountTaxAmount>\n"
                    + "		<CNGTIIUM />\n"
                    + "		<CNGTINetAmount>0.00</CNGTINetAmount>\n"
                    + "		<CNGTIPartDescription />\n"
                    + "		<CNGTISpecification />\n"
                    + "		<CNGTITaxAmount>0.00</CNGTITaxAmount>\n"
                    + "		<CNGTITaxCode />\n"
                    + "		<CNGTITaxPercent>0.00</CNGTITaxPercent>\n"
                    + "		<CNGTITotalAmount>0.00</CNGTITotalAmount>\n"
                    + "		<CNGTIUnitPrice>0.00</CNGTIUnitPrice>\n"
                    + "		<ContractSuspended>false</ContractSuspended>\n"
                    + "		<CurrencyCode>COP</CurrencyCode>\n"
                    + "		<CurrencySwitch>false</CurrencySwitch>\n"
                    + "		<CustID/>\n"
                    + "		<CustName/>\n"
                    + "		<CustomerName/>\n"
                    + "		<DeleteRASchedule>false</DeleteRASchedule>\n"
                    + "		<DispGLAcct />\n"
                    + "		<DisplaySymbol />\n"
                    + "		<DispPONum />\n"
                    + "		<DispShipToAddr/>\n"
                    + "		<DocDisplaySymbol />\n"
                    + "		<DocDspUnitPrice>0</DocDspUnitPrice>\n"
                    + "		<DocLessDiscount>0.000</DocLessDiscount>\n"
                    + "		<DocLineTax>0.000</DocLineTax>\n"
                    + "		<DocLineTotal>0.000</DocLineTotal>\n"
                    + "		<DocPEDetAmt>0.000</DocPEDetAmt>\n"
                    + "		<DropShipment>false</DropShipment>\n"
                    + "		<DspAdvanceBillCredit>0.000</DspAdvanceBillCredit>\n"
                    + "		<DspDiscount>0.000</DspDiscount>\n"
                    + "		<DspDocAdvanceBillCredit>0.000</DspDocAdvanceBillCredit>\n"
                    + "		<DspDocDiscount>0.000</DspDocDiscount>\n"
                    + "		<DspDocExtPrice>" + decimalFormat.format(Math.abs(feddto.getSubtotal())) + "</DspDocExtPrice>\n"
                    + "		<DspDocLessDiscount>0.000</DspDocLessDiscount>\n"
                    + "		<DspDocLineTax>0.000</DspDocLineTax>\n"
                    + "		<DspDocLineTotal>0.000</DspDocLineTotal>\n"
                    + "		<DspDocTotalMiscChrg>0.000</DspDocTotalMiscChrg>\n"
                    + "		<DspExtPrice>0.000</DspExtPrice>\n"
                    + "		<DspInvoiceRef>0</DspInvoiceRef>\n"
                    + "		<DspLessDiscount>0.000</DspLessDiscount>\n"
                    + "		<DspLineTax>0.000</DspLineTax>\n"
                    + "		<DspLineTotal>0.000</DspLineTotal>\n"
                    + "		<DspOurShipQty>0.00000</DspOurShipQty>\n"
                    + "		<DspSellingShipQty>0.00000</DspSellingShipQty>\n"
                    + "		<DspTaxExempt />\n"
                    + "		<DspTotalMiscChrg>0.000</DspTotalMiscChrg>\n"
                    + "		<DspUnitPrice>0.0000</DspUnitPrice>\n"
                    + "		<EnableDspWithholdAmt>false</EnableDspWithholdAmt>\n"
                    + "		<EnableRMADelete>false</EnableRMADelete>\n"
                    + "		<EnableRMAUpdate>false</EnableRMAUpdate>\n"
                    + "		<GLTranAmt>0</GLTranAmt>\n"
                    + "		<GroupID/>\n"
                    + "		<InPrice>false</InPrice>\n"
                    + "		<InvLegalNum />\n"
                    + "		<InvoiceDate>" + fehdto.getFecha() + "</InvoiceDate>\n"
                    + "		<InvoiceType>SHP</InvoiceType>\n"
                    + "		<IsCommisBtnSensitive>false</IsCommisBtnSensitive>\n"
                    + "		<IsIntrastatSensitive>false</IsIntrastatSensitive>\n"
                    + "		<IsTaxBtnSensitive>false</IsTaxBtnSensitive>\n"
                    + "		<LessDiscount>0.000</LessDiscount>\n"
                    + "		<LineTax>0.000</LineTax>\n"
                    + "		<LineTotal>0.000</LineTotal>\n"
                    + "		<LinkedCurrencySymbol />\n"
                    + "		<OpenInvoice>true</OpenInvoice>\n"
                    + "		<OrderUM>Unid</OrderUM>\n"
                    + "		<OrigTaxCat/>\n"
                    + "		<PEDetAmt>0.000</PEDetAmt>\n"
                    + "		<PEDspCurrencySymbol />\n"
                    + "		<Posted>true</Posted>\n"
                    + "		<RADesc />\n"
                    + "		<RASchedExists>false</RASchedExists>\n"
                    + "		<Rpt1DspAdvanceBillCredit>0.000</Rpt1DspAdvanceBillCredit>\n"
                    + "		<Rpt1DspDiscount>0.000</Rpt1DspDiscount>\n"
                    + "		<Rpt1DspExtPrice>0.000</Rpt1DspExtPrice>\n"
                    + "		<Rpt1DspLessDiscount>0.000</Rpt1DspLessDiscount>\n"
                    + "		<Rpt1DspLineTax>0.000</Rpt1DspLineTax>\n"
                    + "		<Rpt1DspLineTotal>0.000</Rpt1DspLineTotal>\n"
                    + "		<Rpt1DspTotalMiscChrg>0.000</Rpt1DspTotalMiscChrg>\n"
                    + "		<Rpt1DspUnitPrice>0.0000</Rpt1DspUnitPrice>\n"
                    + "		<Rpt1LineTax>0.000</Rpt1LineTax>\n"
                    + "		<Rpt1LineTotal>0.000</Rpt1LineTotal>\n"
                    + "		<Rpt1PEDetAmt>0.000</Rpt1PEDetAmt>\n"
                    + "		<Rpt2DspAdvanceBillCredit>0.000</Rpt2DspAdvanceBillCredit>\n"
                    + "		<Rpt2DspDiscount>0.000</Rpt2DspDiscount>\n"
                    + "		<Rpt2DspExtPrice>0.000</Rpt2DspExtPrice>\n"
                    + "		<Rpt2DspLessDiscount>0.000</Rpt2DspLessDiscount>\n"
                    + "		<Rpt2DspLineTax>0.000</Rpt2DspLineTax>\n"
                    + "		<Rpt2DspLineTotal>0.000</Rpt2DspLineTotal>\n"
                    + "		<Rpt2DspTotalMiscChrg>0.000</Rpt2DspTotalMiscChrg>\n"
                    + "		<Rpt2DspUnitPrice>0.0000</Rpt2DspUnitPrice>\n"
                    + "		<Rpt2LineTax>0.000</Rpt2LineTax>\n"
                    + "		<Rpt2LineTotal>0.000</Rpt2LineTotal>\n"
                    + "		<Rpt2PEDetAmt>0.000</Rpt2PEDetAmt>\n"
                    + "		<Rpt3DspAdvanceBillCredit>0.000</Rpt3DspAdvanceBillCredit>\n"
                    + "		<Rpt3DspDiscount>0.000</Rpt3DspDiscount>\n"
                    + "		<Rpt3DspExtPrice>0.000</Rpt3DspExtPrice>\n"
                    + "		<Rpt3DspLessDiscount>0.000</Rpt3DspLessDiscount>\n"
                    + "		<Rpt3DspLineTax>0.000</Rpt3DspLineTax>\n"
                    + "		<Rpt3DspLineTotal>0.000</Rpt3DspLineTotal>\n"
                    + "		<Rpt3DspTotalMiscChrg>0.000</Rpt3DspTotalMiscChrg>\n"
                    + "		<Rpt3DspUnitPrice>0.0000</Rpt3DspUnitPrice>\n"
                    + "		<Rpt3LineTax>0.000</Rpt3LineTax>\n"
                    + "		<Rpt3LineTotal>0.000</Rpt3LineTotal>\n"
                    + "		<Rpt3PEDetAmt>0.000</Rpt3PEDetAmt>\n"
                    + "		<SalesRepCode1>" + fehdto.getIdUsuarioSf0() + "</SalesRepCode1>\n"
                    + "		<SalesRepCode2 />\n"
                    + "		<SalesRepCode3 />\n"
                    + "		<SalesRepCode4 />\n"
                    + "		<SalesRepCode5 />\n"
                    + "		<SalesRepName1>" + fehdto.getNombreUsuario() + "</SalesRepName1>\n"
                    + "		<SalesRepName2 />\n"
                    + "		<SalesRepName3 />\n"
                    + "		<SalesRepName4 />\n"
                    + "		<SalesRepName5 />\n"
                    + "		<ShipToContactEMailAddress />\n"
                    + "		<ShipToContactFaxNum />\n"
                    + "		<ShipToContactName />\n"
                    + "		<ShipToContactPhoneNum/>\n"
                    + "		<ShpLegalNum />\n"
                    + "		<SoldToCustID/>\n"
                    + "		<SoldToCustName/>\n"
                    + "		<TermsCode />\n"
                    + "		<AdvBillEnabled>false</AdvBillEnabled>\n"
                    + "		<MXCustomsDuty />\n"
                    + "		<BitFlag>0</BitFlag>\n"
                    + "		<CallCodeCallDescription />\n"
                    + "		<ContractCodeContractDescription />\n"
                    + "		<ContractNumSuspended>false</ContractNumSuspended>\n"
                    + "		<CustCntName />\n"
                    + "		<CustCntMiddleName />\n"
                    + "		<CustCntFirstName />\n"
                    + "		<CustCntFaxNum />\n"
                    + "		<CustCntCorpName />\n"
                    + "		<CustCntPhoneNum />\n"
                    + "		<CustCntLastName />\n"
                    + "		<CustNumCustID/>\n"
                    + "		<CustNumName/>\n"
                    + "		<CustNumAllowShipTo3>false</CustNumAllowShipTo3>\n"
                    + "		<CustNumBTName />\n"
                    + "		<IncomeTaxDescription />\n"
                    + "		<InvoiceNumTermsCode/>\n"
                    + "		<InvoiceNumCardMemberName />\n"
                    + "		<JournalCodeJrnlDescription />\n"
                    + "		<MilestoneIDDescription />\n"
                    + "		<OrderLineLineDesc/>\n"
                    + "		<OrderNumCurrencyCode/>\n"
                    + "		<OrderNumCardMemberName />\n"
                    + "		<OTSCntryDescription />\n"
                    + "		<PackLineLineDesc />\n"
                    + "		<PackNumName />\n"
                    + "		<PartNumPartDescription>" + feddto.getNombreRefCliente() + "</PartNumPartDescription>\n"
                    + "		<PartNumTrackDimension>false</PartNumTrackDimension>\n"
                    + "		<PartNumIUM>Unid</PartNumIUM>\n"
                    + "		<PartNumSellingFactor>0.00000</PartNumSellingFactor>\n"
                    + "		<PartNumSalesUM>Unid</PartNumSalesUM>\n"
                    + "		<PartNumPricePerCode>E</PartNumPricePerCode>\n"
                    + "		<PartNumTrackLots>false</PartNumTrackLots>\n"
                    + "		<PartNumTrackSerialNum>false</PartNumTrackSerialNum>\n"
                    + "		<ProdCodeDescription/>\n"
                    + "		<ProjectIDDescription />\n"
                    + "		<ReclassCodeDescription />\n"
                    + "		<ReclassReasonDescription />\n"
                    + "		<RMALineLineDesc />\n"
                    + "		<SalesCatIDDescription />\n"
                    + "		<ShipToCustCustID/>\n"
                    + "		<ShipToCustName/>\n"
                    + "		<ShipToCustBTName />\n"
                    + "		<ShipViaCodeDescription/>\n"
                    + "		<ShipViaCodeWebDesc />\n"
                    + "		<TaxCatIDDescription/>\n"
                    + "		<TaxRegionDescription/>\n"
                    + "		<RowMod />\n"
                    + "		<Number01>0.0000</Number01>\n"
                    + "		<CheckBox12>false</CheckBox12>\n"
                    + "		<ShortChar07 />\n"
                    + "		<OT>" + feddto.getOt() + "</OT>\n"
                    + "		<Character01>" + feddto.getComentario() + "</Character01>"
                    + "	</InvcDtl>\n";
            i++;
        }
        fedao.setXml(xml_dtl);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(2);
        fedao.setStatus(false);
        fedao.setUrl("");

        fedao.ingresaXml();

        String xml_prepaidPayment = "<PrepaidPayment>\n"
                + "		<ID>0</ID>\n"
                + "		<PaidAmount>0</PaidAmount>\n"
                + "		<PaidDate>2017-12-01</PaidDate>\n"
                + "		<PaidTime>12:00:00</PaidTime>\n"
                + "		<InstructionID/>\n"
                + "	</PrepaidPayment>";
        fedao.setXml(xml_prepaidPayment);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(3);
        fedao.setStatus(false);
        fedao.setUrl("");

        fedao.ingresaXml();

//        List<FEDtlDTO> ListaTax = fedao.ListaDtl(orden);
        String xml_tax = "";
        int j = 1;
        for (FEDtlDTO feddto1 : ListaTax) {
            xml_tax = xml_tax + "	<InvcTax>\n"
                    + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                    + "		<InvoiceNum>" + dcto + "</InvoiceNum>\n"
                    + "		<InvoiceLine>0" + j + "</InvoiceLine>\n"
                    + "		<TaxCode/>\n"
                    + "		<ReportableAmt>0.000</ReportableAmt>\n"
                    + "		<DocReportableAmt>0.000</DocReportableAmt>\n"
                    + "		<TaxableAmt>0.000</TaxableAmt>\n"
                    + "		<DocTaxableAmt>" + feddto1.getSubtotalSf2() + "</DocTaxableAmt>\n"
                    + "		<Percent>" + feddto1.getPorcentajeIva() + "</Percent>\n"
                    + "		<TaxAmt>" + feddto1.getIvaSf2() + "</TaxAmt>\n"
                    + "		<DocTaxAmt>" + feddto1.getIvaSf2() + "</DocTaxAmt>\n"
                    + "		<Manual>false</Manual>\n"
                    + "		<ChangedBy/>\n"
                    + "		<ChangeDate/>\n"
                    + "		<ChangeTime/>\n"
                    + "		<ReverseCharge>false</ReverseCharge>\n"
                    + "		<Rpt1ReportableAmt>0.000</Rpt1ReportableAmt>\n"
                    + "		<Rpt2ReportableAmt>0.000</Rpt2ReportableAmt>\n"
                    + "		<Rpt3ReportableAmt>0.000</Rpt3ReportableAmt>\n"
                    + "		<Rpt1TaxableAmt>0.000</Rpt1TaxableAmt>\n"
                    + "		<Rpt2TaxableAmt>0.000</Rpt2TaxableAmt>\n"
                    + "		<Rpt3TaxableAmt>0.000</Rpt3TaxableAmt>\n"
                    + "		<Rpt1TaxAmt>0.000</Rpt1TaxAmt>\n"
                    + "		<Rpt2TaxAmt>0.000</Rpt2TaxAmt>\n"
                    + "		<Rpt3TaxAmt>0.000</Rpt3TaxAmt>\n"
                    + "		<RateCode>IVA_19</RateCode>\n"
                    + "		<CollectionType>0</CollectionType>\n"
                    + "		<Timing>0</Timing>\n"
                    + "		<ExemptType>0</ExemptType>\n"
                    + "		<ExemptPercent>0.00</ExemptPercent>\n"
                    + "		<ResolutionNum />\n"
                    + "		<TaxRateDate/>\n"
                    + "		<DefTaxableAmt>0.000</DefTaxableAmt>\n"
                    + "		<DocDefTaxableAmt>0.000</DocDefTaxableAmt>\n"
                    + "		<Rpt1DefTaxableAmt>0.000</Rpt1DefTaxableAmt>\n"
                    + "		<Rpt2DefTaxableAmt>0.000</Rpt2DefTaxableAmt>\n"
                    + "		<Rpt3DefTaxableAmt>0.000</Rpt3DefTaxableAmt>\n"
                    + "		<DefTaxAmt>0.000</DefTaxAmt>\n"
                    + "		<DocDefTaxAmt>0.000</DocDefTaxAmt>\n"
                    + "		<Rpt1DefTaxAmt>0.000</Rpt1DefTaxAmt>\n"
                    + "		<Rpt2DefTaxAmt>0.000</Rpt2DefTaxAmt>\n"
                    + "		<Rpt3DefTaxAmt>0.000</Rpt3DefTaxAmt>\n"
                    + "		<ManAdd>false</ManAdd>\n"
                    + "		<DedTaxAmt>0.000</DedTaxAmt>\n"
                    + "		<DocDedTaxAmt>0.000</DocDedTaxAmt>\n"
                    + "		<Rpt1DedTaxAmt>0.000</Rpt1DedTaxAmt>\n"
                    + "		<Rpt2DedTaxAmt>0.000</Rpt2DedTaxAmt>\n"
                    + "		<Rpt3DedTaxAmt>0.000</Rpt3DedTaxAmt>\n"
                    + "		<ECAcquisitionSeq>0</ECAcquisitionSeq>\n"
                    + "		<FixedAmount>0.000</FixedAmount>\n"
                    + "		<DocFixedAmount>0.000</DocFixedAmount>\n"
                    + "		<Rpt1FixedAmount>0.000</Rpt1FixedAmount>\n"
                    + "		<Rpt2FixedAmount>0.000</Rpt2FixedAmount>\n"
                    + "		<Rpt3FixedAmount>0.000</Rpt3FixedAmount>\n"
                    + "		<TextCode />\n"
                    + "		<TaxAmtVar>0.000</TaxAmtVar>\n"
                    + "		<DocTaxAmtVar>0.000</DocTaxAmtVar>\n"
                    + "		<Rpt1TaxAmtVar>0.000</Rpt1TaxAmtVar>\n"
                    + "		<Rpt2TaxAmtVar>0.000</Rpt2TaxAmtVar>\n"
                    + "		<Rpt3TaxAmtVar>0.000</Rpt3TaxAmtVar>\n"
                    + "		<RateTextCode />\n"
                    + "		<TaxFuture>false</TaxFuture>\n"
                    + "		<STPProcessed>false</STPProcessed>\n"
                    + "		<OrgInvcLine>0</OrgInvcLine>\n"
                    + "		<MovementNum/>\n"
                    + "		<TranDocTypeID />\n"
                    + "		<LegalNumber />\n"
                    + "		<TaxConfirm>false</TaxConfirm>\n"
                    + "		<AllocDepInvcNum>0</AllocDepInvcNum>\n"
                    + "		<AllocDepInvcLine>0</AllocDepInvcLine>\n"
                    + "		<AllocDepRateCode />\n"
                    + "		<AllocDepECAcqSeq>0</AllocDepECAcqSeq>\n"
                    + "		<AllocDepTaxBal>0.000</AllocDepTaxBal>\n"
                    + "		<DocAllocTaxBal>0.000</DocAllocTaxBal>\n"
                    + "		<Rpt1AllocDepTaxBal>0.000</Rpt1AllocDepTaxBal>\n"
                    + "		<Rpt2AllocDepTaxBal>0.000</Rpt2AllocDepTaxBal>\n"
                    + "		<Rpt3AllocDepTaxBal>0.000</Rpt3AllocDepTaxBal>\n"
                    + "		<ReverseByInvoiceNum>0</ReverseByInvoiceNum>\n"
                    + "		<ConfirmDocType />\n"
                    + "		<ConfirmLegalNumber />\n"
                    + "		<CurrencyCode>COP</CurrencyCode>\n"
                    + "		<CurrencySwitch>false</CurrencySwitch>\n"
                    + "		<DescCollectionType />\n"
                    + "		<DisplaySymbol />\n"
                    + "		<DocDisplaySymbol/>\n"
                    + "		<DspDocFixedAmount>0.000</DspDocFixedAmount>\n"
                    + "		<DspDocReportableAmt>0.000</DspDocReportableAmt>\n"
                    + "		<DspDocTaxableAmt>0.000</DspDocTaxableAmt>\n"
                    + "		<DspDocTaxAmt>0.000</DspDocTaxAmt>\n"
                    + "		<DspDocTaxAmtVar>0.000</DspDocTaxAmtVar>\n"
                    + "		<DspFixedAmount>0.000</DspFixedAmount>\n"
                    + "		<DspReportableAmt>0.000</DspReportableAmt>\n"
                    + "		<DspTaxableAmt>0.000</DspTaxableAmt>\n"
                    + "		<DspTaxAmt>0.000</DspTaxAmt>\n"
                    + "		<DspTaxAmtVar>0.000</DspTaxAmtVar>\n"
                    + "		<GroupID/>\n"
                    + "		<NeedConfirmation>false</NeedConfirmation>\n"
                    + "		<RateCodeAmt>0.000</RateCodeAmt>\n"
                    + "		<Rpt1DspFixedAmount>0.000</Rpt1DspFixedAmount>\n"
                    + "		<Rpt1DspReportableAmt>0.000</Rpt1DspReportableAmt>\n"
                    + "		<Rpt1DspTaxableAmt>0.000</Rpt1DspTaxableAmt>\n"
                    + "		<Rpt1DspTaxAmt>0.000</Rpt1DspTaxAmt>\n"
                    + "		<Rpt1DspTaxAmtVar>0.000</Rpt1DspTaxAmtVar>\n"
                    + "		<Rpt2DspFixedAmount>0.000</Rpt2DspFixedAmount>\n"
                    + "		<Rpt2DspReportableAmt>0.000</Rpt2DspReportableAmt>\n"
                    + "		<Rpt2DspTaxableAmt>0.000</Rpt2DspTaxableAmt>\n"
                    + "		<Rpt2DspTaxAmt>0.000</Rpt2DspTaxAmt>\n"
                    + "		<Rpt2DspTaxAmtVar>0.000</Rpt2DspTaxAmtVar>\n"
                    + "		<Rpt3DspFixedAmount>0.000</Rpt3DspFixedAmount>\n"
                    + "		<Rpt3DspReportableAmt>0.000</Rpt3DspReportableAmt>\n"
                    + "		<Rpt3DspTaxableAmt>0.000</Rpt3DspTaxableAmt>\n"
                    + "		<Rpt3DspTaxAmt>0.000</Rpt3DspTaxAmt>\n"
                    + "		<Rpt3DspTaxAmtVar>0.000</Rpt3DspTaxAmtVar>\n"
                    + "		<TaxDescription/>\n"
                    + "		<TaxTotal>0.000</TaxTotal>\n"
                    + "		<ChangeDateTime/>\n"
                    + "		<BitFlag>0</BitFlag>\n"
                    + "		<InvoiceLineLineDesc/>\n"
                    + "		<InvoiceNumCardMemberName />\n"
                    + "		<InvoiceNumTermsCode/>\n"
                    + "		<RateCodeDescription/>\n"
                    + "		<SalesTaxDescDescription/>\n"
                    + "		<RowMod />\n"
                    + "		<WithholdingTax_c>false</WithholdingTax_c>\n"
                    + "	</InvcTax>\n";
            j++;
        }

        fedao.setXml(xml_tax);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(4);
        fedao.setStatus(false);
        fedao.setUrl("");

        fedao.ingresaXml();

        String codigCiudad = "";
        String codigoDep = "";
        if (fecdto.getIdCiudad().length() == 4) {
            codigCiudad = "0" + fecdto.getIdCiudad();
            codigoDep = "0" + fecdto.getIdDpto();
        } else {
            codigCiudad = fecdto.getIdCiudad();
            codigoDep = fecdto.getIdDpto();
        }
       
      String tipoOpera = "        <OperationType_c>" + (tipoorden == FACTURA_VENTA ? fecdto.getTipoOperacion() : isCreditNoteTypeWithoutReference ? 22 : 20) + "</OperationType_c>";

             
        String xml_Company = "<Company>\n"
                + "             <IdentificationType>31</IdentificationType>\n"
                + "             <CompanyType_c>1</CompanyType_c>\n"
                + "		<Company>" + fecdto.getNIT().trim() + "</Company>\n"
                + "		<Name>" + fecdto.getRazonSocial() + "</Name>\n"
                + "		<Address1>" + fecdto.getDireccion() + "</Address1>\n"//direccion
                + "		<!-- Se corrige el codigo de municipiio o ciudad -->\n"
                + "		<CityNum>" + codigCiudad + "</CityNum>\n"
                + "		<StateNum>" + codigoDep + "</StateNum>\n"
                + "		<Email>" + fecdto.getEmail() + "</Email>\n"
                + "		<Address2 />\n"
                + "		<Address3 />\n"
                + "		<City>" + fecdto.getCiudad() + "</City>\n"
                + "		<State>" + fecdto.getDepartamento() + "</State>\n"
                + "		<Zip>050023</Zip>\n"
                + "		<!-- Se agrega el campo FiscalResposability_c -->\n"
                + "		<FiscalResposability_c>" + fecdto.ResponsabilidadesFiscales() + "</FiscalResposability_c>\n"
                + "		<Country>" + fecdto.getPais() + "</Country>\n"
                + "		<PhoneNum>" + fecdto.getTelefono() + "</PhoneNum>\n"
                + "		<FaxNum/>\n"
                + "		<!-- Se agrega tipo de operacion -->\n"
                + tipoOpera + "\n"
                + "		<!-- Se agrega tipo de regimen -->\n"
                + "		<RegimeType_c>" + fecdto.getIdRegimen() + "</RegimeType_c>\n"
                + "		<FEIN/>\n"
                + "		<StateTaxID>" + fecdto.getNIT().trim() + "</StateTaxID>\n"
                + "		<CurrentFiscalYear>" + fecdto.getYearFiscal() + "</CurrentFiscalYear>\n"
                + "		<EDICode />\n"
                + "		<TaxRegionCode />\n"
                + "		<CountryNum>0</CountryNum>\n"
                + "		<Number>0</Number>\n"
                + "		<FRxDSN />\n"
                + "		<EschedFileSet />\n"
                + "		<ExternalID />\n"
                + "		<LogoFile />\n"
                + "		<EmpPhotoPath />\n"
                + "		<CalendarID>PRODUCC</CalendarID>\n"
                + "		<FrxUserid />\n"
                + "		<FRxPassWord />\n"
                + "		<FiscalCalendarID>COLOMBIA</FiscalCalendarID>\n"
                + "		<LegalName />\n"
                + "		<TaxRegReason />\n"
                + "		<ActTypeCode />\n"
                + "		<OrgRegCode />\n"
                + "		<ManagerName />\n"
                + "		<ChiefAcctName />\n"
                + "		<ReportTypePref>Both</ReportTypePref>\n"
                + "		<WIApplication />\n"
                + "		<WIAutoCreateJob>false</WIAutoCreateJob>\n"
                + "		<WIGetDetails>false</WIGetDetails>\n"
                + "		<WISchedule>false</WISchedule>\n"
                + "		<WIRelease>false</WIRelease>\n"
                + "		<WIShippingCosts>false</WIShippingCosts>\n"
                + "		<DeepCopy>false</DeepCopy>\n"
                + "		<DeepCopyDupOrRevEst>false</DeepCopyDupOrRevEst>\n"
                + "		<MapURL />\n"
                + "		<MXMunicipio />\n"
                + "		<APBOECheck>0</APBOECheck>\n"
                + "		<COSequenceCert>0</COSequenceCert>\n"
                + "		<BaseCurrCode>COP</BaseCurrCode>\n"
                + "		<EmploymentCode>R</EmploymentCode>\n"
                + "		<HasCurrTrans>true</HasCurrTrans>\n"
                + "		<Intrastat>false</Intrastat>\n"
                + "		<KindOfEmp>N</KindOfEmp>\n"
                + "		<ProductName>Epicor</ProductName>\n"
                + "		<PurchaseScheduleMode />\n"
                + "		<AllowSchedulingBeforeToday>false</AllowSchedulingBeforeToday>\n"
                + "		<ExtPRConfig>false</ExtPRConfig>\n"
                + "		<BitFlag>0</BitFlag>\n"
                + "		<CalendarDescription/>\n"
                + "		<FiscalCalDescription/>\n"
                + "		<TaxRegionDescription />\n"
                + "		<Character03/>\n"
                + "		<Character04/>\n"
                + "		<Character05/>\n"
                + "		<Character06/>\n"
                + "		<Character07/>\n"
                + "		<Character08/>\n"
                + "		<Character09/>\n"
                + "		<Character10/>\n"
                + "		<Number01>0.0000</Number01>\n"
                + "		<Number02>0.0000</Number02>\n"
                + "		<Number03>0.0000</Number03>\n"
                + "		<Number04>0.0000</Number04>\n"
                + "		<CheckBox01>true</CheckBox01>\n"
                + "		<CheckBox02>true</CheckBox02>\n"
                + "		<CheckBox05>true</CheckBox05>\n"
                + "		<Number11>0.0000</Number11>\n"
                + "		<Number14>0.0000</Number14>\n"
                + "		<Number15>0.0000</Number15>\n"
                + "		<ShortChar01/>\n"
                + "		<ShortChar02/>\n"
                + "		<ShortChar03/>\n"
                + "		<ShortChar04/>\n"
                + "		<ShortChar05/>\n"
                + "		<ShortChar06/>\n"
                + "		<ShortChar07/>\n"
                + "		<ShortChar08/>\n"
                + "		<ShortChar09/>\n"
                + "		<ShortChar10/>\n"
                + "		<Character01 />\n"
                + "		<Character02 />\n"
                + "	</Company>\n";

        fedao.setXml(xml_Company);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(5);
        fedao.setStatus(false);
        fedao.setUrl("");

        fedao.ingresaXml();

        String xml_trc = "<SalesTRC>\n"
                + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                + "		<TaxCode>IVA_19</TaxCode>\n"
                + "		<RateCode>IVA_19</RateCode>\n"
                + "		<Description>Iva del 19 porciento</Description>\n"
                + "		<DefaultRate>false</DefaultRate>\n"
                + "		<TextCode />\n"
                + "		<AGAFIPCode />\n"
                + "		<AGFEAFIPCode />\n"
                + "		<AGPurchaseColNumber>0</AGPurchaseColNumber>\n"
                + "		<AGSalesColNumber>0</AGSalesColNumber>\n"
                + "		<BEIntracomCode />\n"
                + "		<FatherDeleted>false</FatherDeleted>\n"
                + "		<BitFlag>0</BitFlag>\n"
                + "		<TaxTextDescription />\n"
                + "		<IdImpDIAN_c>01</IdImpDIAN_c>\n"
                + "	</SalesTRC>\n"
                + "	<SalesTRC>\n"
                + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                + "		<TaxCode>R_FUENTE</TaxCode>\n"
                + "		<RateCode>R_FUENTE</RateCode>\n"
                + "		<Description>Retencion fuente</Description>\n"
                + "		<DefaultRate>false</DefaultRate>\n"
                + "		<TextCode />\n"
                + "		<AGAFIPCode />\n"
                + "		<AGFEAFIPCode />\n"
                + "		<AGPurchaseColNumber>0</AGPurchaseColNumber>\n"
                + "		<AGSalesColNumber>0</AGSalesColNumber>\n"
                + "		<BEIntracomCode />\n"
                + "		<FatherDeleted>false</FatherDeleted>\n"
                + "		<BitFlag>0</BitFlag>\n"
                + "		<TaxTextDescription />\n"
                + "		<IdImpDIAN_c>06</IdImpDIAN_c>\n"
                + "	</SalesTRC>"
                + "	<SalesTRC>\n"
                + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                + "		<TaxCode>R_IVA</TaxCode>\n"
                + "		<RateCode>R_IVA</RateCode>\n"
                + "		<Description>Retencion iva</Description>\n"
                + "		<DefaultRate>false</DefaultRate>\n"
                + "		<TextCode />\n"
                + "		<AGAFIPCode />\n"
                + "		<AGFEAFIPCode />\n"
                + "		<AGPurchaseColNumber>0</AGPurchaseColNumber>\n"
                + "		<AGSalesColNumber>0</AGSalesColNumber>\n"
                + "		<BEIntracomCode />\n"
                + "		<FatherDeleted>false</FatherDeleted>\n"
                + "		<BitFlag>0</BitFlag>\n"
                + "		<TaxTextDescription />\n"
                + "		<IdImpDIAN_c>05</IdImpDIAN_c>\n"
                + "	</SalesTRC>\n";
        fedao.setXml(xml_trc);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(6);
        fedao.setStatus(false);
        fedao.setUrl("");

        fedao.ingresaXml();

        FECustomerDTO c = fedao.ListaCustomer(fehdto.getNitCliente());

        String codigCiudadCliente = "";
        String codigoDepCliente = "";
        if (c.getCodigoCiudad().length() == 4) {
            codigCiudadCliente = "0" + c.getCodigoCiudad();
            codigoDepCliente = "0" + c.getCodigoDto();
        } else {
            codigCiudadCliente = c.getCodigoCiudad();
            codigoDepCliente = c.getCodigoDto();
        }

        if (c.getTipoOperacion().length() == 1) {
            tipoOpera = "0" + c.getTipoOperacion();
        } else {
            tipoOpera = c.getTipoOperacion();
        }

        String xml_customer = "<Customer>\n"
                + "             <IdentificationType>" + c.getIdentificationType() + "</IdentificationType>\n"
                + "             <CompanyType_c>" + c.getCompanyType() + "</CompanyType_c>\n"
                + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                + "		<CustID>" + c.getIdCustomerSf2() + "</CustID>\n"
                + "		<CustNum>" + c.getIdCustomerSf2() + "</CustNum>\n"
                + "		<Name>" + c.getNombreCustomer().trim() + "</Name>\n"
                + "		<Address1>" + c.getDireccion() + "</Address1>\n"
                + "		<Address2/>\n"
                + "		<Address3/>\n"
                + "		<RegimeType_c>" + c.getRegimen() + "</RegimeType_c>\n"
                + "		<City>" + c.getNombreCiudad() + "</City>\n"
                + "		<!-- Se corrige el codigo de muicipio o ciudad -->\n"
                + "		<CityNum>" + codigCiudadCliente + "</CityNum>\n"
                + "		<State>" + c.getNombreDto() + "</State>\n"
                + "		<StateNum>" + codigoDepCliente + "</StateNum>\n"
                + "		<OperationType_c>" + tipoOpera + "</OperationType_c>\n"
                + "		<FiscalResposability_c>" + c.getRespoFiscal() + "</FiscalResposability_c>\n"
                + "		<Zip/>\n"
                + "		<Country>COLOMBIA</Country>\n"
                + "		<ResaleID>" + c.getIdCustomerSf2() + "</ResaleID>\n"
                + "		<SalesRepCode/>\n"
                + "		<TerritoryID/>\n"
                + "		<ShipToNum />\n"
                + "		<TermsCode/>\n"
                + "		<ShipViaCode/>\n"
                + "		<PrintStatements>false</PrintStatements>\n"
                + "		<PrintLabels>true</PrintLabels>\n"
                + "		<PrintAck>true</PrintAck>\n"
                + "		<FinCharges>true</FinCharges>\n"
                + "		<CreditHold>false</CreditHold>\n"
                + "		<GroupCode/>\n"
                + "		<DiscountPercent>0.00</DiscountPercent>\n"
                + "		<PrimPCon>0</PrimPCon>\n"
                + "		<PrimBCon>0</PrimBCon>\n"
                + "		<PrimSCon>0</PrimSCon>\n"
                + "		<Comment />\n"
                + "		<EstDate>0</EstDate>\n"
                + "		<FaxNum />\n"
                + "		<PhoneNum>" + c.getTelefono() + "</PhoneNum>\n"
                + "		<TaxExempt />\n"
                + "		<MarkUpID />\n"
                + "		<BillDay>0</BillDay>\n"
                + "		<OneInvPerPS>true</OneInvPerPS>\n"
                + "		<DefaultFOB />\n"
                + "		<CreditIncludeOrders>false</CreditIncludeOrders>\n"
                + "		<CreditHoldSource />\n"
                + "		<CreditClearUserID/>\n"
                + "		<CreditClearDate/>\n"
                + "		<CreditClearTime/>\n"
                + "		<EDICode />\n"
                + "		<CurrencyCode>COP</CurrencyCode>\n"
                + "		<CountryNum>0</CountryNum>\n"
                + "		<LangNameID/>\n"
                + "		<BorderCrossing />\n"
                + "		<FormatStr />\n"
                + "		<BTName />\n"
                + "		<BTAddress1 />\n"
                + "		<BTAddress2 />\n"
                + "		<BTAddress3 />\n"
                + "		<BTCity />\n"
                + "		<BTState />\n"
                + "		<BTZip />\n"
                + "		<BTCountryNum>0</BTCountryNum>\n"
                + "		<BTCountry />\n"
                + "		<BTPhoneNum />\n"
                + "		<BTFaxNum />\n"
                + "		<BTFormatStr />\n"
                + "		<ParentCustNum>0</ParentCustNum>\n"
                + "		<TaxRegionCode/>\n"
                + "		<ICCust>false</ICCust>\n"
                + "		<ContBillDay>1</ContBillDay>\n"
                + "		<EMailAddress>" + c.getEmail() + "</EMailAddress>\n"
                + "		<ShippingQualifier />\n"
                + "		<AllocPriorityCode />\n"
                + "		<ReservePriorityCode />\n"
                + "		<LinkPortNum>0</LinkPortNum>\n"
                + "		<WebCustomer>false</WebCustomer>\n"
                + "		<CustomerType>CUS</CustomerType>\n"
                + "		<NoContact>false</NoContact>\n"
                + "		<TerritoryLock>false</TerritoryLock>\n"
                + "		<CustURL />\n"
                + "		<PendingTerritoryID />\n"
                + "		<ExtID />\n"
                + "		<ConsolidateSO>false</ConsolidateSO>\n"
                + "		<BillFrequency>W</BillFrequency>\n"
                + "		<CreditIncludePI>false</CreditIncludePI>\n"
                + "		<GlobalCust>false</GlobalCust>\n"
                + "		<ICTrader>false</ICTrader>\n"
                + "		<TaxAuthorityCode />\n"
                + "		<ExternalDeliveryNote>false</ExternalDeliveryNote>\n"
                + "		<GlobalCredIncOrd>true</GlobalCredIncOrd>\n"
                + "		<GlobalCredIncPI>false</GlobalCredIncPI>\n"
                + "		<GlobalCurrencyCode />\n"
                + "		<ExternalID />\n"
                + "		<GlobalCreditHold />\n"
                + "		<GlobalLock>false</GlobalLock>\n"
                + "		<CheckDuplicatePO>false</CheckDuplicatePO>\n"
                + "		<CreditLimit/>\n"
                + "		<CustPILimit>0</CustPILimit>\n"
                + "		<GlobalCreditLimit>0</GlobalCreditLimit>\n"
                + "		<GlobalPILimit>0</GlobalPILimit>\n"
                + "		<DocGlobalCreditLimit>0</DocGlobalCreditLimit>\n"
                + "		<DocGlobalPILimit>0</DocGlobalPILimit>\n"
                + "		<RfqAttachAllow>false</RfqAttachAllow>\n"
                + "		<DiscountQualifier/>\n"
                + "		<AllowAltBillTo>false</AllowAltBillTo>\n"
                + "		<DemandDeliveryDays>0</DemandDeliveryDays>\n"
                + "		<DemandDateType>S</DemandDateType>\n"
                + "		<DemandAddLeadTime>0</DemandAddLeadTime>\n"
                + "		<DemandAddAction>B</DemandAddAction>\n"
                + "		<DemandChangeLeadTime>0</DemandChangeLeadTime>\n"
                + "		<DemandChangeAction>B</DemandChangeAction>\n"
                + "		<DemandCancelLeadTime>0</DemandCancelLeadTime>\n"
                + "		<DemandCancelAction>B</DemandCancelAction>\n"
                + "		<DemandNewLineLeadTime>0</DemandNewLineLeadTime>\n"
                + "		<DemandNewLineAction>B</DemandNewLineAction>\n"
                + "		<DemandQtyChangeLeadTime>0</DemandQtyChangeLeadTime>\n"
                + "		<DemandQtyChangeAction>B</DemandQtyChangeAction>\n"
                + "		<DemandChangeDateLeadTime>0</DemandChangeDateLeadTime>\n"
                + "		<DemandChangeDateAction>B</DemandChangeDateAction>\n"
                + "		<TradingPartnerName />\n"
                + "		<ResDelivery>false</ResDelivery>\n"
                + "		<SatDelivery>false</SatDelivery>\n"
                + "		<SatPickup>false</SatPickup>\n"
                + "		<Hazmat>false</Hazmat>\n"
                + "		<DocOnly>false</DocOnly>\n"
                + "		<RefNotes />\n"
                + "		<ApplyChrg>false</ApplyChrg>\n"
                + "		<ChrgAmount>0.000</ChrgAmount>\n"
                + "		<COD>false</COD>\n"
                + "		<CODFreight>false</CODFreight>\n"
                + "		<CODCheck>false</CODCheck>\n"
                + "		<CODAmount>0.000</CODAmount>\n"
                + "		<GroundType />\n"
                + "		<NotifyFlag>false</NotifyFlag>\n"
                + "		<NotifyEMail />\n"
                + "		<DeclaredIns>false</DeclaredIns>\n"
                + "		<DeclaredAmt>0.000</DeclaredAmt>\n"
                + "		<PeriodicityCode>0</PeriodicityCode>\n"
                + "		<ServSignature>false</ServSignature>\n"
                + "		<ServAlert>false</ServAlert>\n"
                + "		<ServHomeDel>false</ServHomeDel>\n"
                + "		<DeliveryType />\n"
                + "		<ServPhone />\n"
                + "		<ServInstruct />\n"
                + "		<ServRelease>false</ServRelease>\n"
                + "		<ServAuthNum />\n"
                + "		<ServRef1 />\n"
                + "		<ServRef2 />\n"
                + "		<ServRef3 />\n"
                + "		<ServRef4 />\n"
                + "		<ServRef5 />\n"
                + "		<EarlyBuffer>0</EarlyBuffer>\n"
                + "		<LateBuffer>0</LateBuffer>\n"
                + "		<DemandUnitPriceDiff>false</DemandUnitPriceDiff>\n"
                + "		<DemandUnitPriceDiffAction>B</DemandUnitPriceDiffAction>\n"
                + "		<ExcFromVal>false</ExcFromVal>\n"
                + "		<AddressVal>false</AddressVal>\n"
                + "		<RebateVendorNum>0</RebateVendorNum>\n"
                + "		<RebateForm />\n"
                + "		<CreditCardOrder>false</CreditCardOrder>\n"
                + "		<DemandCheckForPart>false</DemandCheckForPart>\n"
                + "		<DemandCheckForPartAction>B</DemandCheckForPartAction>\n"
                + "		<ChangedBy/>\n"
                + "		<ChangeDate/>\n"
                + "		<ChangeTime/>\n"
                + "		<ChargeCode />\n"
                + "		<IndividualPackIDs>false</IndividualPackIDs>\n"
                + "		<IntrntlShip>false</IntrntlShip>\n"
                + "		<CertOfOrigin>false</CertOfOrigin>\n"
                + "		<CommercialInvoice>false</CommercialInvoice>\n"
                + "		<ShipExprtDeclartn>false</ShipExprtDeclartn>\n"
                + "		<LetterOfInstr>false</LetterOfInstr>\n"
                + "		<FFID />\n"
                + "		<FFCompName />\n"
                + "		<FFAddress1 />\n"
                + "		<FFAddress2 />\n"
                + "		<FFAddress3 />\n"
                + "		<FFCity />\n"
                + "		<FFState />\n"
                + "		<FFZip />\n"
                + "		<FFCountry />\n"
                + "		<FFCountryNum>0</FFCountryNum>\n"
                + "		<FFPhoneNum />\n"
                + "		<NonStdPkg>false</NonStdPkg>\n"
                + "		<DeliveryConf>1</DeliveryConf>\n"
                + "		<AddlHdlgFlag>false</AddlHdlgFlag>\n"
                + "		<UPSQuantumView>false</UPSQuantumView>\n"
                + "		<UPSQVShipFromName />\n"
                + "		<UPSQVMemo />\n"
                + "		<UPSQVEmailType />\n"
                + "		<FFContact />\n"
                + "		<ETCAddrChg>false</ETCAddrChg>\n"
                + "		<TaxRoundRule>0</TaxRoundRule>\n"
                + "		<TaxMethod>L</TaxMethod>\n"
                + "		<ValidPayer>true</ValidPayer>\n"
                + "		<ValidSoldTo>true</ValidSoldTo>\n"
                + "		<ValidShipTo>true</ValidShipTo>\n"
                + "		<OverrideRlsClass>false</OverrideRlsClass>\n"
                + "		<AcrossNatAcc>false</AcrossNatAcc>\n"
                + "		<NAParentCreditIsUsed>false</NAParentCreditIsUsed>\n"
                + "		<NACreditIsShare>false</NACreditIsShare>\n"
                + "		<NACreditPreferenceList>O</NACreditPreferenceList>\n"
                + "		<NAParentCreditPrc>0.00</NAParentCreditPrc>\n"
                + "		<NACreditSharedPrc>0.00</NACreditSharedPrc>\n"
                + "		<AllowOTS>true</AllowOTS>\n"
                + "		<ThirdPLCust>false</ThirdPLCust>\n"
                + "		<ManagedVendID />\n"
                + "		<ManagedVendNum>0</ManagedVendNum>\n"
                + "		<NARlsClassCode />\n"
                + "		<DirectDebiting>false</DirectDebiting>\n"
                + "		<ReminderCode />\n"
                + "		<GlbNAParentCreditIsUsed>false</GlbNAParentCreditIsUsed>\n"
                + "		<GlbNACreditIsShare>false</GlbNACreditIsShare>\n"
                + "		<GlbNAParentCreditPrc>0.00</GlbNAParentCreditPrc>\n"
                + "		<GlbNACreditSharedPrc>0.00</GlbNACreditSharedPrc>\n"
                + "		<AllowShipTo3>false</AllowShipTo3>\n"
                + "		<OTSSaveAs />\n"
                + "		<CustPartOpts>M</CustPartOpts>\n"
                + "		<HasBank>false</HasBank>\n"
                + "		<PMUID>0</PMUID>\n"
                + "		<DemandCheckForRev>false</DemandCheckForRev>\n"
                + "		<OrderHoldForReview>false</OrderHoldForReview>\n"
                + "		<DemandCheckForRevAction>B</DemandCheckForRevAction>\n"
                + "		<ShipToTerrList>58902</ShipToTerrList>\n"
                + "		<AcctRefNumber />\n"
                + "		<ARInvoiceITCode />\n"
                + "		<CreditMemoITCode />\n"
                + "		<MiscCashRecITCode />\n"
                + "		<LegalName />\n"
                + "		<ARInvoiceAdjITCode />\n"
                + "		<TaxRegReason />\n"
                + "		<InvPerPackLine>false</InvPerPackLine>\n"
                + "		<OrgRegCode />\n"
                + "		<DemandCloseRejSkd>false</DemandCloseRejSkd>\n"
                + "		<OurBankCode />\n"
                + "		<DemandCloseNoMatch>false</DemandCloseNoMatch>\n"
                + "		<DmdCheckPartialShip>false</DmdCheckPartialShip>\n"
                + "		<DmdCheckShipAction>B</DmdCheckShipAction>\n"
                + "		<DemandCheckCUMM>false</DemandCheckCUMM>\n"
                + "		<DemandCheckCUMMAction>B</DemandCheckCUMMAction>\n"
                + "		<DemandPricing/>\n"
                + "		<PriceTolerance>0.0000</PriceTolerance>\n"
                + "		<PreferredBank />\n"
                + "		<CheckDateCapPromise>false</CheckDateCapPromise>\n"
                + "		<CheckConfirmCapPromise>false</CheckConfirmCapPromise>\n"
                + "		<CheckUpdateCapPromise>false</CheckUpdateCapPromise>\n"
                + "		<DemandCapPromiseDate />\n"
                + "		<DemandCapPromiseAction />\n"
                + "		<DemandCapPromiseUpdate />\n"
                + "		<PeriodicBilling>false</PeriodicBilling>\n"
                + "		<DueDateCriteria>S</DueDateCriteria>\n"
                + "		<PBTerms>0</PBTerms>\n"
                + "		<ERSOrder>false</ERSOrder>\n"
                + "		<DemandSplitSched>false</DemandSplitSched>\n"
                + "		<OTSmartString>false</OTSmartString>\n"
                + "		<DeferredRev>false</DeferredRev>\n"
                + "		<RACode />\n"
                + "		<DemandCheckConfig>false</DemandCheckConfig>\n"
                + "		<DemandCheckCfgAction />\n"
                + "		<AllowAsAltRemitTo>false</AllowAsAltRemitTo>\n"
                + "		<FederalID />\n"
                + "		<WIApplication />\n"
                + "		<WICustomer />\n"
                + "		<WIShippingCosts>false</WIShippingCosts>\n"
                + "		<LOQBookPCFinishing>false</LOQBookPCFinishing>\n"
                + "		<LOQBookPCPaper>false</LOQBookPCPaper>\n"
                + "		<LOQBookPCPress>false</LOQBookPCPress>\n"
                + "		<LOQBookPCPlates>false</LOQBookPCPlates>\n"
                + "		<Variations>false</Variations>\n"
                + "		<OversPct>0.0000</OversPct>\n"
                + "		<UndersPct>0.0000</UndersPct>\n"
                + "		<DefaultLOQstyle />\n"
                + "		<DefaultOrderAcknowledgement />\n"
                + "		<DefaultPackSlip />\n"
                + "		<DefaultOversPricing />\n"
                + "		<LOQPrepressStyle />\n"
                + "		<CSR />\n"
                + "		<LOQBookCaFinishing>false</LOQBookCaFinishing>\n"
                + "		<LOQBookCapaper>false</LOQBookCapaper>\n"
                + "		<LOQBookCaPress>false</LOQBookCaPress>\n"
                + "		<LOQBookCatPlates>false</LOQBookCatPlates>\n"
                + "		<LOQVariations>false</LOQVariations>\n"
                + "		<DefaultInvoicestyle />\n"
                + "		<AEPLOQType />\n"
                + "		<BusinessCust />\n"
                + "		<THBranchID />\n"
                + "		<CustPricingSchema />\n"
                + "		<ParamCode />\n"
                + "		<AGAFIPResponsibilityCode />\n"
                + "		<AGBillToProvinceCode />\n"
                + "		<AGGrossIncomeTaxID />\n"
                + "		<AGIDDocTypeCode />\n"
                + "		<AGIDDocumentNumber />\n"
                + "		<AGProvinceCode />\n"
                + "		<AGUseGoodDefaultMark>false</AGUseGoodDefaultMark>\n"
                + "		<Collections>false</Collections>\n"
                + "		<MXMunicipio />\n"
                + "		<PEIdentityDocType />\n"
                + "		<PEDocumentID />\n"
                + "		<PEGoodsContributor>false</PEGoodsContributor>\n"
                + "		<PEWithholdAgent>false</PEWithholdAgent>\n"
                + "		<PECollectionAgent>false</PECollectionAgent>\n"
                + "		<PENotFound>false</PENotFound>\n"
                + "		<PENoAddress>false</PENoAddress>\n"
                + "		<EntityUseCode />\n"
                + "		<InvcOrderCmpDflt>false</InvcOrderCmpDflt>\n"
                + "		<EInvoice>false</EInvoice>\n"
                + "		<RegistrationCode />\n"
                + "		<EAddress />\n"
                + "		<DemandCheckForRunOutPart>false</DemandCheckForRunOutPart>\n"
                + "		<DemandCheckForRunOutPartAction>B</DemandCheckForRunOutPartAction>\n"
                + "		<EInvCompanyIDAttr />\n"
                + "		<INCSTNumber />\n"
                + "		<INPANNumber />\n"
                + "		<COOneTimeID/>\n"
                + "		<COIsOneTimeCust>false</COIsOneTimeCust>\n"
                + "		<DEOrgType>N</DEOrgType>\n"
                + "		<PEGuaranteeName />\n"
                + "		<PEGuaranteeAddress1 />\n"
                + "		<PEGuaranteeAddress2 />\n"
                + "		<PEGuaranteeAddress3 />\n"
                + "		<PEGuaranteeCity />\n"
                + "		<PEGuaranteeState />\n"
                + "		<PEGuaranteeZip />\n"
                + "		<PEGuaranteeCountry />\n"
                + "		<PEGuaranteePhoneNum />\n"
                + "		<PEGuaranteeTaxID />\n"
                + "		<OurSupplierCode />\n"
                + "		<ECCType />\n"
                + "		<MYIndustryCode />\n"
                + "		<SyncToExternalCRM>false</SyncToExternalCRM>\n"
                + "		<ExternalCRMCustomerID />\n"
                + "		<ExternalCRMCustomerType />\n"
                + "		<ExternalCRMSyncRequired>false</ExternalCRMSyncRequired>\n"
                + "		<Ownership />\n"
                + "		<Industry />\n"
                + "		<AnnualRevenue>0.000</AnnualRevenue>\n"
                + "		<NumberOfEmployees>0</NumberOfEmployees>\n"
                + "		<TickerLocation />\n"
                + "		<TickerSymbol />\n"
                + "		<Rating />\n"
                + "		<TWGUIRegNum />\n"
                + "		<MXAccountNumber />\n"
                + "		<ConsolidateLinesPerPart>false</ConsolidateLinesPerPart>\n"
                + "		<ACATOtherCare>false</ACATOtherCare>\n"
                + "		<ACATRespCareType />\n"
                + "		<ACATRespCareTypeDesc />\n"
                + "		<AddrList/>\n"
                + "		<AdvancedLaborRate>false</AdvancedLaborRate>\n"
                + "		<ApplyHoldToOrders>false</ApplyHoldToOrders>\n"
                + "		<AttrCodeList/>\n"
                + "		<BaseCurrCode/>\n"
                + "		<BillDayDesc/>\n"
                + "		<BillFreqDescription />\n"
                + "		<BTAddrList>  ~</BTAddrList>\n"
                + "		<BTLegalName />\n"
                + "		<ChargeCodeDesc />\n"
                + "		<CustTypeDescription>Customer</CustTypeDescription>\n"
                + "		<DiscQualDescription>Add</DiscQualDescription>\n"
                + "		<DspBTFormatStr />\n"
                + "		<DspFormatStr />\n"
                + "		<DspRlsClass />\n"
                + "		<EnableGlobalCust>false</EnableGlobalCust>\n"
                + "		<EnableGlobalLock>false</EnableGlobalLock>\n"
                + "		<ExtCoExist>false</ExtCoExist>\n"
                + "		<FxdGlbOrdCredit>0</FxdGlbOrdCredit>\n"
                + "		<FxdGlbPICredit>0</FxdGlbPICredit>\n"
                + "		<FxdOrderCredit>0</FxdOrderCredit>\n"
                + "		<FxdPICredit>0</FxdPICredit>\n"
                + "		<FxdTotOrders>4</FxdTotOrders>\n"
                + "		<FxdTotPI>0</FxdTotPI>\n"
                + "		<GlbFlag>false</GlbFlag>\n"
                + "		<GlbLink />\n"
                + "		<GlbNAChildCrdAvail>0.000</GlbNAChildCrdAvail>\n"
                + "		<GlbNAOwnCreditAvail>0.000</GlbNAOwnCreditAvail>\n"
                + "		<GlbNAOwnCreditUsedDsp>0.000</GlbNAOwnCreditUsedDsp>\n"
                + "		<GlbNAParentCrdAvail>0.000</GlbNAParentCrdAvail>\n"
                + "		<GlbNAParentsCreditUsedDsp>0.000</GlbNAParentsCreditUsedDsp>\n"
                + "		<GlbNAPoolCrdAvail>0.000</GlbNAPoolCrdAvail>\n"
                + "		<GlbNAPoolCreditUsed>0.000</GlbNAPoolCreditUsed>\n"
                + "		<GlbNASharedCreditUsedDsp>0.000</GlbNASharedCreditUsedDsp>\n"
                + "		<IntegrationFlag>false</IntegrationFlag>\n"
                + "		<ListCode />\n"
                + "		<LLLBAnnualHomeCap>0.0000</LLLBAnnualHomeCap>\n"
                + "		<LLLBAnnualPartPenCap>0.0000</LLLBAnnualPartPenCap>\n"
                + "		<LLLBAnnualResiCap>0.0000</LLLBAnnualResiCap>\n"
                + "		<LLLBAnnualSelfFndCap>0.0000</LLLBAnnualSelfFndCap>\n"
                + "		<LLLBAssetAssess>false</LLLBAssetAssess>\n"
                + "		<LLLBLifeTimeCap>0.0000</LLLBLifeTimeCap>\n"
                + "		<LLLBMeansTestAmt>0.0000</LLLBMeansTestAmt>\n"
                + "		<LLLBMeansTestFeeAmt>0.0000</LLLBMeansTestFeeAmt>\n"
                + "		<NAChildCrdAvail>0.000</NAChildCrdAvail>\n"
                + "		<NACreditCust>false</NACreditCust>\n"
                + "		<NACreditUpdated>false</NACreditUpdated>\n"
                + "		<NAOwnCreditAvail>0.000</NAOwnCreditAvail>\n"
                + "		<NAOwnCreditUsedDsp>0.000</NAOwnCreditUsedDsp>\n"
                + "		<NAParentCrdAvail>0.000</NAParentCrdAvail>\n"
                + "		<NAParentsCreditUsedDsp>0.000</NAParentsCreditUsedDsp>\n"
                + "		<NAPoolCrdAvail>0.000</NAPoolCrdAvail>\n"
                + "		<NAPoolCreditUsed>0.000</NAPoolCreditUsed>\n"
                + "		<NASharedCreditUsedDsp>0.000</NASharedCreditUsedDsp>\n"
                + "		<NATotalCreditAvail>0.000</NATotalCreditAvail>\n"
                + "		<NATotalCreditUsed>0.000</NATotalCreditUsed>\n"
                + "		<ParentCustID />\n"
                + "		<ParentName />\n"
                + "		<PeriodicityDesc />\n"
                + "		<PeriodicityList>0`Not Used</PeriodicityList>\n"
                + "		<PIFlag>false</PIFlag>\n"
                + "		<ReminderGroupDesc />\n"
                + "		<SearchIDs />\n"
                + "		<SendShipment>false</SendShipment>\n"
                + "		<ShippingQualifierDesc />\n"
                + "		<TotGlbInvoiceCredit>0</TotGlbInvoiceCredit>\n"
                + "		<TotGlbOpenCredit>0</TotGlbOpenCredit>\n"
                + "		<TotGlbOrderCredit>0</TotGlbOrderCredit>\n"
                + "		<TotGlbPICredit>0</TotGlbPICredit>\n"
                + "		<TotInvoiceCredit>0</TotInvoiceCredit>\n"
                + "		<TotLCCredit>0.000</TotLCCredit>\n"
                + "		<TotLCCumInvoices>0.000</TotLCCumInvoices>\n"
                + "		<TotLCInvoiceBal>0.000</TotLCInvoiceBal>\n"
                + "		<TotLCOpenOrders>0.000</TotLCOpenOrders>\n"
                + "		<TotLCUsed>0.000</TotLCUsed>\n"
                + "		<TotOpenCredit>0</TotOpenCredit>\n"
                + "		<TotOpenInvoices>9</TotOpenInvoices>\n"
                + "		<TotOpenInvoicesLC>0</TotOpenInvoicesLC>\n"
                + "		<TotOpenLC>0.000</TotOpenLC>\n"
                + "		<TotOpenOrderLC>0</TotOpenOrderLC>\n"
                + "		<TotOpenOrders>0</TotOpenOrders>\n"
                + "		<TotOpenPI>0</TotOpenPI>\n"
                + "		<TotOrderCredit>0</TotOrderCredit>\n"
                + "		<TotPICredit>0</TotPICredit>\n"
                + "		<ACATCommCare>false</ACATCommCare>\n"
                + "		<COASegReferences />\n"
                + "		<MXCURP />\n"
                + "		<BitFlag>9</BitFlag>\n"
                + "		<AGAFIPResponsibilityDescription />\n"
                + "		<AGBillToProvinceDescription />\n"
                + "		<AGIDDocTypeCUITMark>false</AGIDDocTypeCUITMark>\n"
                + "		<AGIDDocTypeDescription />\n"
                + "		<AGProvinceDescription />\n"
                + "		<CurrencyCurrName />\n"
                + "		<CurrencyCurrencyID/>\n"
                + "		<CurrencyCurrSymbol/>\n"
                + "		<CurrencyCurrDesc/>\n"
                + "		<CurrencyDocumentDesc />\n"
                + "		<CustGrupGroupDesc/>\n"
                + "		<DeliveryTypeDescription />\n"
                + "		<FOBDescription />\n"
                + "		<GlobalCurrencyCurrSymbol/>\n"
                + "		<GlobalCurrencyCurrDesc/>\n"
                + "		<GlobalCurrencyDocumentDesc />\n"
                + "		<GlobalCurrencyCurrencyID/>\n"
                + "		<GlobalCurrencyCurrName />\n"
                + "		<LanguageDescription/>\n"
                + "		<MarkUpDescription />\n"
                + "		<PayMethodSummarizePerCustomer>false</PayMethodSummarizePerCustomer>\n"
                + "		<PayMethodType>0</PayMethodType>\n"
                + "		<PayMethodName />\n"
                + "		<PreferredBankBankName />\n"
                + "		<PreferredBankDescription />\n"
                + "		<RASchedCdRADesc />\n"
                + "		<ReservePriDescription />\n"
                + "		<SalesRepName/>\n"
                + "		<ShipViaWebDesc />\n"
                + "		<ShipViaDescription/>\n"
                + "		<TATaxAuthorityDescription />\n"
                + "		<TaxRegionDescription/>\n"
                + "		<TermsDescription/>\n"
                + "		<TerritoryTerritoryDesc/>\n"
                + "		<Character01 />\n"
                + "		<Character02 />\n"
                + "		<Character03/>\n"
                + "		<Character04/>\n"
                + "		<Character05 />\n"
                + "		<Character06/>\n"
                + "		<Character07 />\n"
                + "		<Character08 />\n"
                + "		<Character09 />\n"
                + "		<Number01>0</Number01>\n"
                + "		<CheckBox01>false</CheckBox01>\n"
                + "		<CheckBox02>false</CheckBox02>\n"
                + "		<CheckBox03>false</CheckBox03>\n"
                + "		<CheckBox04>true</CheckBox04>\n"
                + "		<ShortChar01/>\n"
                + "		<ShortChar02/>\n"
                + "		<ShortChar03/>\n"
                + "		<ShortChar04/>\n"
                + "		<ShortChar05/>\n"
                + "		<ShortChar06/>\n"
                + "		<ShortChar07/>\n"
                + "		<ShortChar08/>\n"
                + "		<ShortChar09/>\n"
                + "		<ShortChar10 />\n"
                + "	</Customer>\n";

        fedao.setXml(xml_customer);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(7);
        fedao.setStatus(false);
        fedao.setUrl("");

        fedao.ingresaXml();

        String xml_time = "<COOneTime>\n"
                + "		<Company>" + fehdto.getNit().trim() + "</Company>\n"
                + "		<COOneTimeID>" + c.getIdCustomerSf2() + "</COOneTimeID>\n"
                + "		<Description />\n"
                + "		<CheckDigit/>\n"
                + "             <IdentificationType>" + c.getIdentificationType() + "</IdentificationType>\n"
                + "		<FirstLastName/>\n"
                + "		<FirstName/>\n"
                + "		<SecondLastName/>\n"
                + "		<OtherNames/>\n"
                + "		<CompanyName>" + c.getNombreCustomer().trim() + "</CompanyName>\n"
                + "		<Address1/>\n"
                + "		<Address2/>\n"
                + "		<Address3 />\n"
                + "		<Phone>" + c.getTelefono() + "</Phone>\n"
                + "		<Department/>\n"
                + "		<TownCode />\n"
                + "		<CountryCode>CO</CountryCode>\n"
                + "		<CIIUCode />\n"
                + "		<CommonRegime>false</CommonRegime>\n"
                + "		<ImportantTaxpayer>true</ImportantTaxpayer>\n"
                + "		<SimplifiedRegime>false</SimplifiedRegime>\n"
                + "		<Nature />\n"
                + "		<EMailAddress />\n"
                + "		<CellPhoneNum />\n"
                + "	</COOneTime>\n"
                + "	</ARInvoiceDataSet>";

        fedao.setXml(xml_time);
        fedao.setIdOrden(orden);
        fedao.setIdDcto(dcto);
        fedao.setIdDctoDian(consecutivo);
        fedao.setPrefijo(fehdto.getPrefijo());
        fedao.setIdTipoOrden(tipoorden);
        fedao.setTipo_xml(8);
        fedao.setStatus(false);
        fedao.setUrl("");

        fedao.ingresaXml();
        return (xml_head + xml_dtl + xml_prepaidPayment + xml_tax + xml_Company + xml_trc + xml_customer + xml_time);
    }

    public static String formatOrdenesCompra(List<FEDtlDTO> listDetalleHeader) {
    return     listDetalleHeader.stream()
                .map(FEDtlDTO::getOrcenCompra) // Obtener el campo orcenCompra
                .filter(orden -> orden != null && !orden.isEmpty()) // Filtrar valores nulos y vacos
                .collect(Collectors.joining(";")); // Unir los valores no nulos con punto y coma
        
    }
}
